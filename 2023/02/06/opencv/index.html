<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Airex Yu">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://example.com/2023/02/06/opencv/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="opencv配置123pip install opencv-python&#x3D;&#x3D;3.4.1.15pip install opencv-contrib-python&#x3D;&#x3D;3.4.1.15#因为高版本的opencv会对某些算法进行版权保护，opencv3.4.1.15是所有算法都可以使用的版本  图像基本操作图像：由RGB三种通道构成；一张图片是由许多个像素点构成的，一个像素点包含RGB三个矩阵，每个矩阵表">
<meta property="og:type" content="article">
<meta property="og:title" content="opencv">
<meta property="og:url" content="http://example.com/2023/02/06/opencv/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="opencv配置123pip install opencv-python&#x3D;&#x3D;3.4.1.15pip install opencv-contrib-python&#x3D;&#x3D;3.4.1.15#因为高版本的opencv会对某些算法进行版权保护，opencv3.4.1.15是所有算法都可以使用的版本  图像基本操作图像：由RGB三种通道构成；一张图片是由许多个像素点构成的，一个像素点包含RGB三个矩阵，每个矩阵表">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230206095645727.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208121009584.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208121034801.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208131640981.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208135809961.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208142844317.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208144437958.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208145736151-16758394565651.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208145741953.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208150818877.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208151621579.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208151633862.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/sobel_1.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208155955561.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208160000622.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208160004993.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208160008186.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208161322781.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208162814034.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208162818931.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208175216977.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208175548495.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208180931050.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208185656238.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208191920040.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208192217028.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208192814702.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208193712743.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208193715339.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230208203325023.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209114624319.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209114707171.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209114721812.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209131703269.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209131718238.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209141121285.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209141200376.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209141203373.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209143000577.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209143138032-16759242982013.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209143947478.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230209174228235.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210111500702.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210113356587.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210115022651.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210115806340.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210115954702.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210120014534.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210121903677.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210121935985.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210123034000.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210132239516.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210142515372.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210142528105.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210142539670.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210143021902.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210151203769.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210151210488.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210151216141-16760131363414.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210151223178.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210151228881.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210151327622.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210153336999.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210154852643.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210154859449.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210154938709.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210155157542.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210155012796.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210160559620.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210160833303.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210160847942.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210161938450.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210162121033.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210162156075.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210163141334.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210163308506.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210163322856-16760180030965.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210165037521-16760190378296.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210185152441.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210185156559.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210190327535-16760270077707.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210191647018.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210191653915.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210191718583.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210191725841.png">
<meta property="og:image" content="http://example.com/2023/02/06/opencv/image-20230210192427254.png">
<meta property="article:published_time" content="2023-02-06T02:35:26.000Z">
<meta property="article:modified_time" content="2023-05-25T13:10:19.930Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="opencv">
<meta property="article:tag" content="图像处理">
<meta property="article:tag" content="梯度">
<meta property="article:tag" content="边缘检测">
<meta property="article:tag" content="特征提取">
<meta property="article:tag" content="特征匹配">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2023/02/06/opencv/image-20230206095645727.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/%E9%B1%BC.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/%E9%B1%BC.svg">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/%E9%B1%BC.svg">
    <!--- Page Info-->
    
    <title>
        
            opencv -
        
        Airex-Daily
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/assets/fonts.css">

    <!--- Font Part-->
    
    
    
        <link href="" rel="stylesheet">
    
    
        <link href="" rel="stylesheet">
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":true,"family":null,"url":null},"english":{"enable":true,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fix","image":{"light":"/images/wallhaven-wqery6-light.webp","dark":"/images/wallhaven-rry6gw.png"},"title":"伸手也握不住彩虹🌈","subtitle":{"text":["——我期待"],"hitokoto":{"enable":true,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/Airex-ai","instagram":null,"zhihu":null,"twitter":null,"email":"airex.yu@foxmail.com"}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":"https://music.163.com/song?id=1501530173&userid=253099352","cover":null}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.1.5","navbar":{"auto_hide":true,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"About":{"icon":"fa-regular fa-user","submenus":{"Github":"https://github.com/Airex-ai?tab=repositories"}},"随记":{"icon":"fa-solid fa-tree-palm","path":"/masonry/"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}}};
    Global.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    Global.data_config = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Airex-Daily
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        首页
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        归档
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/Airex-ai?tab=repositories">GITHUB
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/masonry/"  >
                                    
                                        
                                            <i class="fa-solid fa-tree-palm"></i>
                                        
                                        随记
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                首页
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                归档
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/Airex-ai?tab=repositories">GITHUB</a>
                            </li>
                        
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/masonry/"  >
                             
                                
                                    <i class="fa-solid fa-tree-palm"></i>
                                
                                随记
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
             
                <div class="article-title">         
                    <img src="/images/opencv.png" alt="opencv" />
                    <h1 class="article-title-cover">opencv</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/%E5%A4%B4%E5%83%8F.JPG">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Airex Yu</span>
                            
                                <span class="author-label">Lv3</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-02-06 10:35:26</span>
        <span class="mobile">2023-02-06 10:35</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-05-25 21:10:19</span>
            <span class="mobile">2023-05-25 21:10</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89/">计算机视觉</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/opencv/">opencv</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">图像处理</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E6%A2%AF%E5%BA%A6/">梯度</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/">边缘检测</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96/">特征提取</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/">特征匹配</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h1 id="opencv配置"><a href="#opencv配置" class="headerlink" title="opencv配置"></a>opencv配置</h1><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install opencv-python==<span class="number">3.4</span><span class="number">.1</span><span class="number">.15</span></span><br><span class="line">pip install opencv-contrib-python==<span class="number">3.4</span><span class="number">.1</span><span class="number">.15</span></span><br><span class="line"><span class="comment">#因为高版本的opencv会对某些算法进行版权保护，opencv3.4.1.15是所有算法都可以使用的版本</span></span><br></pre></td></tr></table></figure></div>

<h1 id="图像基本操作"><a href="#图像基本操作" class="headerlink" title="图像基本操作"></a>图像基本操作</h1><p>图像：由RGB三种通道构成；一张图片是由许多个像素点构成的，一个像素点包含RGB三个矩阵，每个矩阵表示对应颜色的状态，矩阵取值为0—255</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230206095645727.png"
                      class="" title="image-20230206095645727"
                >

<h2 id="数据读取-图像"><a href="#数据读取-图像" class="headerlink" title="数据读取-图像"></a>数据读取-图像</h2><ul>
<li>cv2.IMREAD_COLOR：彩色图像</li>
<li>cv2.IMREAD_GRAYSCALE：灰度图像</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="comment">#opencv读取的格式是BGR，若用其他工具包可能不同</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;cat.jpg&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment">#读彩色图</span></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/cat.png&quot;</span>)</span><br><span class="line"><span class="comment">#读灰色图</span></span><br><span class="line">img1 = cv2.imread(<span class="string">&quot;../pic/cat.png&quot;</span>, cv2.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="comment"># print(img)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#图像的显示，也可以创建多个窗口</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;image&quot;</span>,img1)</span><br><span class="line"><span class="comment">#等待时间，0代表按任意键终止</span></span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"><span class="comment"># print(img.shape)</span></span><br><span class="line"><span class="comment"># print(type(img))</span></span><br><span class="line"><span class="comment"># print(img.size)</span></span><br><span class="line"><span class="comment"># print(img.dtype)            #关联的数据类型对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将图片的操作编写成一个函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"><span class="comment">#截取部分图像数据</span></span><br><span class="line">img_split = cv2.imread(<span class="string">&quot;../pic/cat.png&quot;</span>)</span><br><span class="line">cat = img[<span class="number">0</span>:<span class="number">50</span>,<span class="number">0</span>:<span class="number">200</span>]            <span class="comment">#宽50，长200</span></span><br><span class="line"><span class="comment"># cv_show(&quot;cat&quot;,cat)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#颜色通道提取</span></span><br><span class="line">b,g,r = cv2.split(img)</span><br><span class="line"><span class="comment">#print(g.shape)     #b,g,r的shape是一样的，因为都是从一张图片提取出来的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#颜色通道的合并</span></span><br><span class="line">img_merge = cv2.merge((b,g,r))</span><br><span class="line"><span class="comment"># print(img_merge.shape)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#只保留R</span></span><br><span class="line">cur_img = img.copy()</span><br><span class="line"><span class="comment">#B[0],G[1],R[2]   数字代表序号</span></span><br><span class="line"><span class="comment">#cur_img.shape：(201, 178, 3)</span></span><br><span class="line">cur_img[:,:,<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">cur_img[:,:,<span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">cv_show(<span class="string">&#x27;R&#x27;</span>,cur_img)</span><br><span class="line"></span><br><span class="line"><span class="comment">#只保留G</span></span><br><span class="line">cur_img = img.copy()</span><br><span class="line"><span class="comment">#B[0],G[1],R[2]   数字代表序号</span></span><br><span class="line"><span class="comment">#cur_img.shape：(201, 178, 3)</span></span><br><span class="line">cur_img[:,:,<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">cur_img[:,:,<span class="number">2</span>] = <span class="number">0</span></span><br><span class="line">cv_show(<span class="string">&#x27;R&#x27;</span>,cur_img)</span><br><span class="line"></span><br><span class="line"><span class="comment">#只保留B</span></span><br><span class="line">cur_img = img.copy()</span><br><span class="line"><span class="comment">#B[0],G[1],R[2]   数字代表序号</span></span><br><span class="line"><span class="comment">#cur_img.shape：(201, 178, 3)</span></span><br><span class="line">cur_img[:,:,<span class="number">1</span>] = <span class="number">0</span></span><br><span class="line">cur_img[:,:,<span class="number">2</span>] = <span class="number">0</span></span><br><span class="line">cv_show(<span class="string">&#x27;R&#x27;</span>,cur_img)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208121009584.png"
                      class="" title="image-20230208121009584"
                >

<h2 id="数据读取-视频"><a href="#数据读取-视频" class="headerlink" title="数据读取-视频"></a>数据读取-视频</h2><ul>
<li>cv2.VideoCapture可以捕获摄像头，用数字来控制不同的设备，例如0，1</li>
<li>如果是视频文件，直接指定路径即可</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">vc = cv2.VideoCapture(<span class="string">&quot;../video/周杰伦-发如雪(蓝光).mp4&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#检查是否正确打开</span></span><br><span class="line"><span class="keyword">if</span> vc.isOpened():</span><br><span class="line">    <span class="comment">#视频是一帧帧地循环读取的</span></span><br><span class="line">    <span class="built_in">open</span>,frame = vc.read()    <span class="comment">#open是一个bool类型的值；frame是每一帧图片的矩阵</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">open</span> = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">open</span>:</span><br><span class="line">    ret,frame = vc.read()</span><br><span class="line">    <span class="keyword">if</span> frame <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> ret == <span class="literal">True</span>:</span><br><span class="line">        gray = cv2.cvtColor(frame,cv2.COLOR_BGR2GRAY)           <span class="comment">#将视频的每一帧都转为了灰色图片</span></span><br><span class="line">        cv2.imshow(<span class="string">&quot;result&quot;</span>,gray)                               <span class="comment">#将每一帧都显示出来</span></span><br><span class="line">        <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == <span class="number">27</span>:                         <span class="comment">#设置每一帧的显示时间，以及设置退出按键，27真好使ESC</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">vc.release()             <span class="comment">#Closes video file or capturing device.</span></span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208121034801.png"
                      class="" title="image-20230208121034801"
                >

<h1 id="边界填充"><a href="#边界填充" class="headerlink" title="边界填充"></a>边界填充</h1><ul>
<li>BORDER_REPLICATE：复制最边缘像素</li>
<li>BORDER_REFLECT：将边缘像素镜像复制</li>
<li>BORDER_REFLECT101：优化的边缘镜像复制</li>
<li>BORDER_WRAP：循环边缘复制</li>
<li>BORDER_CONSTANT：常熟填充</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/cat.png&quot;</span>)</span><br><span class="line"></span><br><span class="line">top_size,bottom_size,left_size,right_size = (<span class="number">50</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">replicate = cv2.copyMakeBorder(img,top_size,bottom_size,left_size,right_size,cv2.BORDER_REPLICATE)</span><br><span class="line">reflect = cv2.copyMakeBorder(img,top_size,bottom_size,left_size,right_size,cv2.BORDER_REFLECT)</span><br><span class="line">reflect101 = cv2.copyMakeBorder(img,top_size,bottom_size,left_size,right_size,cv2.BORDER_REFLECT101)</span><br><span class="line">wrap = cv2.copyMakeBorder(img,top_size,bottom_size,left_size,right_size,cv2.BORDER_WRAP)</span><br><span class="line">constant = cv2.copyMakeBorder(img,top_size,bottom_size,left_size,right_size,cv2.BORDER_CONSTANT,value=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># cv2.imshow(&quot;replicate&quot;,replicate)</span></span><br><span class="line"><span class="comment"># cv2.waitKey(0)</span></span><br><span class="line"><span class="comment"># cv2.destroyAllWindows()</span></span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">231</span>),plt.imshow(img,<span class="string">&quot;gray&quot;</span>),plt.title(<span class="string">&quot;original&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">232</span>),plt.imshow(replicate,<span class="string">&quot;gray&quot;</span>),plt.title(<span class="string">&quot;replicate&quot;</span>)  </span><br><span class="line">plt.subplot(<span class="number">233</span>),plt.imshow(reflect,<span class="string">&quot;gray&quot;</span>),plt.title(<span class="string">&quot;reflect&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">234</span>),plt.imshow(reflect101,<span class="string">&quot;gray&quot;</span>),plt.title(<span class="string">&quot;reflect101&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">235</span>),plt.imshow(wrap,<span class="string">&quot;gray&quot;</span>),plt.title(<span class="string">&quot;wrap&quot;</span>)</span><br><span class="line">plt.subplot(<span class="number">236</span>),plt.imshow(constant,<span class="string">&quot;gray&quot;</span>),plt.title(<span class="string">&quot;constant&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208131640981.png"
                      class="" title="image-20230208131640981"
                >

<h1 id="数值计算"><a href="#数值计算" class="headerlink" title="数值计算"></a>数值计算</h1><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/cat.png&quot;</span>)</span><br><span class="line">img1 = cv2.imread(<span class="string">&quot;../pic/cat.png&quot;</span>)</span><br><span class="line"><span class="comment"># print(img)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#图片的矩阵的每一个数都加10，</span></span><br><span class="line">img_cat = img + <span class="number">10</span></span><br><span class="line"><span class="comment">#print(img_cat[:5,:,0])          #输出的是0~5行，所有列，第0层</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#两张图片的相加必须要求shape相同</span></span><br><span class="line"><span class="comment">#超过255，与256取余</span></span><br><span class="line">img_cat = img + img1</span><br><span class="line"><span class="comment"># print(img_cat[0:5,:,0])</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#取最大值，超过255取255</span></span><br><span class="line">img_cat = cv2.add(img,img1)</span><br><span class="line"><span class="comment"># print(img_cat[0:5,:,0])</span></span><br></pre></td></tr></table></figure></div>

<h1 id="图像融合"><a href="#图像融合" class="headerlink" title="图像融合"></a>图像融合</h1><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">cat = cv2.imread(<span class="string">&quot;../pic/cat.png&quot;</span>)</span><br><span class="line">dog = cv2.imread(<span class="string">&quot;../pic/dog.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cat.shape)  <span class="comment">#(201, 178, 3)</span></span><br><span class="line"><span class="built_in">print</span>(dog.shape)  <span class="comment">#(197, 485, 3)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#两张图片的分辨率不一致，首先需要resize</span></span><br><span class="line">dog = cv2.resize(dog,(<span class="number">178</span>,<span class="number">201</span>))     <span class="comment">#顺序要反过来</span></span><br><span class="line"><span class="built_in">print</span>(dog.shape)   <span class="comment">#(201, 178, 3)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#dog = cv2.resize(dog,(0,0),fx=2,fy=2)   #不指定长宽，按比例缩放</span></span><br><span class="line"></span><br><span class="line">img_fuse = cv2.addWeighted(cat,<span class="number">0.4</span>,dog,<span class="number">0.6</span>,<span class="number">0</span>)    <span class="comment">#猫40%透明，狗60%透明，0代表不提高亮度</span></span><br><span class="line">plt.subplot(),plt.imshow(img_fuse,<span class="string">&quot;gray&quot;</span>),plt.title(<span class="string">&quot;result&quot;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208135809961.png"
                      class="" title="image-20230208135809961"
                >

<h1 id="腐蚀与膨胀操作"><a href="#腐蚀与膨胀操作" class="headerlink" title="腐蚀与膨胀操作"></a>腐蚀与膨胀操作</h1><h2 id="腐蚀操作"><a href="#腐蚀操作" class="headerlink" title="腐蚀操作"></a>腐蚀操作</h2><p>图片中的信息会减少</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/plane.png&quot;</span>)</span><br><span class="line"><span class="comment"># cv_show(&quot;origionale&quot;,img)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#初始化了一个3*3的矩阵，并以这个矩阵的大小开始腐蚀操作</span></span><br><span class="line">kernel = np.ones((<span class="number">3</span>,<span class="number">3</span>),np.uint8)</span><br><span class="line">erosion_1  = cv2.erode(img,kernel,iterations=<span class="number">1</span>)   <span class="comment">#迭代的越多，腐蚀越严重</span></span><br><span class="line">erosion_2= cv2.erode(img,kernel,iterations=<span class="number">2</span>)</span><br><span class="line">erosion_3= cv2.erode(img,kernel,iterations=<span class="number">3</span>)</span><br><span class="line">res = np.hstack((erosion_1,erosion_2,erosion_3))</span><br><span class="line"></span><br><span class="line">cv_show(<span class="string">&quot;erosion&quot;</span>,res)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208142844317.png"
                      class="" title="image-20230208142844317"
                >

<h2 id="膨胀操作"><a href="#膨胀操作" class="headerlink" title="膨胀操作"></a>膨胀操作</h2><p>腐蚀操作的逆过程，图片重点信息会增多</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/plane.png&quot;</span>)</span><br><span class="line"><span class="comment"># cv_show(&quot;origionale&quot;,img)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#erosion</span></span><br><span class="line"><span class="comment">#初始化了一个3*3的矩阵，并以这个矩阵的大小开始腐蚀操作</span></span><br><span class="line">kernel = np.ones((<span class="number">3</span>,<span class="number">3</span>),np.uint8)</span><br><span class="line">erosion_1  = cv2.erode(img,kernel,iterations=<span class="number">1</span>)   <span class="comment">#迭代的越多，腐蚀越严重</span></span><br><span class="line">erosion_2= cv2.erode(img,kernel,iterations=<span class="number">2</span>)</span><br><span class="line">erosion_3= cv2.erode(img,kernel,iterations=<span class="number">3</span>)</span><br><span class="line">res = np.hstack((erosion_1,erosion_2,erosion_3))</span><br><span class="line"><span class="comment"># cv_show(&quot;erosion&quot;,res)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#dilate</span></span><br><span class="line">kernel1 = np.ones((<span class="number">3</span>,<span class="number">3</span>),np.uint8)</span><br><span class="line">dilate1 = cv2.dilate(erosion_3,kernel1,iterations=<span class="number">1</span>)</span><br><span class="line">dilate2 = cv2.dilate(erosion_3,kernel1,iterations=<span class="number">2</span>)</span><br><span class="line">dilate3 = cv2.dilate(erosion_3,kernel1,iterations=<span class="number">3</span>)</span><br><span class="line">res2 = np.hstack((dilate1,dilate2,dilate3))</span><br><span class="line">cv_show(<span class="string">&quot;dilate&quot;</span>,res2)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208144437958.png"
                      class="" title="image-20230208144437958"
                >

<h2 id="开运算与闭运算"><a href="#开运算与闭运算" class="headerlink" title="开运算与闭运算"></a>开运算与闭运算</h2><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dige = cv2.imread(<span class="string">&quot;../pic/dige.png&quot;</span>)</span><br><span class="line"><span class="comment">#开运算：先腐蚀后膨胀</span></span><br><span class="line">kernel3 = np.ones((<span class="number">5</span>,<span class="number">5</span>),np.uint8)</span><br><span class="line">opening = cv2.morphologyEx(dige,cv2.MORPH_OPEN,kernel3)</span><br><span class="line">cv_show(<span class="string">&quot;开&quot;</span>,opening)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#闭运算：先膨胀后腐蚀</span></span><br><span class="line">kernel4 = np.ones((<span class="number">5</span>,<span class="number">5</span>),np.uint8)</span><br><span class="line">closing = cv2.morphologyEx(dige,cv2.MORPH_CLOSE,kernel4)</span><br><span class="line">cv_show(<span class="string">&quot;闭&quot;</span>,closing)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208145736151-16758394565651.png"
                      class="" title="image-20230208145736151"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208145741953.png"
                      class="" title="image-20230208145741953"
                >

<h2 id="梯度运算"><a href="#梯度运算" class="headerlink" title="梯度运算"></a>梯度运算</h2><p>膨胀会比原图”胖“，腐蚀会比原图”瘦“，<strong>膨胀 - 腐蚀会得到梯度（边缘信息）</strong></p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#梯度运算：梯度 = 膨胀 - 腐蚀</span></span><br><span class="line">pie =  cv2.imread(<span class="string">&quot;../pic/pie.png&quot;</span>)</span><br><span class="line">kernel5 = np.ones((<span class="number">7</span>,<span class="number">7</span>),np.uint8)</span><br><span class="line">gradient = cv2.morphologyEx(pie,cv2.MORPH_GRADIENT,kernel5)</span><br><span class="line">cv_show(<span class="string">&quot;gradient&quot;</span>,gradient)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208150818877.png"
                      class="" title="image-20230208150818877"
                >

<h2 id="礼帽和黑帽"><a href="#礼帽和黑帽" class="headerlink" title="礼帽和黑帽"></a>礼帽和黑帽</h2><ul>
<li>礼帽 &#x3D; 原始输入 - 开运算结果</li>
<li>黑帽 - 闭运算结果 - 原始输入</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#礼帽</span></span><br><span class="line">tophat = cv2.morphologyEx(dige,cv2.MORPH_TOPHAT,kernel)</span><br><span class="line"><span class="comment"># cv_show(&quot;tophat&quot;,tophat)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#黑帽</span></span><br><span class="line">black_hat = cv2.morphologyEx(dige,cv2.MORPH_BLACKHAT,kernel)</span><br><span class="line">cv_show(<span class="string">&quot;black_hat&quot;</span>,black_hat)</span><br></pre></td></tr></table></figure></div>

<p><strong>礼帽：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208151621579.png"
                      class="" title="image-20230208151621579"
                >

<p><strong>黑帽：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208151633862.png"
                      class="" title="image-20230208151633862"
                >

<h1 id="梯度计算"><a href="#梯度计算" class="headerlink" title="梯度计算"></a>梯度计算</h1><h2 id="Sobel算子"><a href="#Sobel算子" class="headerlink" title="Sobel算子"></a>Sobel算子</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/sobel_1.png"
                      class="" title="sobel_1"
                >

<p>如果所示：A代表每个点，乘以Sobel算子就可以得到水平和垂直方向的梯度<strong>注意：只有边缘部分才有梯度</strong></p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pie = cv2.imread(<span class="string">&quot;../pic/pie.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ddepth：图像的深度；dx：水平；dy：垂直；ksize：Sobel算子的大小，3*3的矩阵</span></span><br><span class="line">sobelx = cv2.Sobel(pie,cv2.CV_64F,<span class="number">1</span>,<span class="number">0</span>,ksize=<span class="number">3</span>)        <span class="comment">#CV_64F：opencv中复数默认截断为0，CV_64F代表每一个像素点元素占64位浮点数，保持原负数</span></span><br><span class="line"><span class="comment"># cv_show(&quot;SOBEL&quot;,sobelx)             #在Soble计算时，会有正负之分，所以会导致一边没有梯度显示</span></span><br><span class="line"></span><br><span class="line">sobelx = cv2.convertScaleAbs(sobelx)      <span class="comment">#对sobel求绝对值</span></span><br><span class="line">cv_show(<span class="string">&quot;sobelx&quot;</span>,sobelx)</span><br><span class="line"></span><br><span class="line">sobely = cv2.Sobel(pie,cv2.CV_64F,<span class="number">0</span>,<span class="number">1</span>,ksize=<span class="number">3</span>)</span><br><span class="line">sobely = cv2.convertScaleAbs(sobely)</span><br><span class="line">cv_show(<span class="string">&quot;sobely&quot;</span>,sobely)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#总梯度</span></span><br><span class="line">sobelxy = cv2.addWeighted(sobelx,<span class="number">0.5</span>,sobely,<span class="number">0.5</span>,<span class="number">0</span>)</span><br><span class="line">cv_show(<span class="string">&quot;sobelxy&quot;</span>,sobelxy)</span><br><span class="line"></span><br><span class="line"><span class="comment">#不建议直接计算，会有重影，会有损失</span></span><br><span class="line">sobelxy = cv2.Sobel(pie,cv2.CV_64F,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line">sobelxy = cv2.convertScaleAbs(sobelxy)</span><br><span class="line">cv_show(<span class="string">&quot;sobelxy&quot;</span>,sobelxy)</span><br></pre></td></tr></table></figure></div>

<p><strong>水平梯度：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208155955561.png"
                      class="" title="image-20230208155955561"
                >

<p><strong>垂直梯度：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208160000622.png"
                      class="" title="image-20230208160000622"
                >

<p><strong>水平与垂直梯度：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208160004993.png"
                      class="" title="image-20230208160004993"
                >

<p><strong>水平与垂直梯度直接相加：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208160008186.png"
                      class="" title="image-20230208160008186"
                >

<h2 id="梯度计算实例"><a href="#梯度计算实例" class="headerlink" title="梯度计算实例"></a>梯度计算实例</h2><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#分开运算梯度</span></span><br><span class="line">lena = cv2.imread(<span class="string">&quot;../pic/lena.jpg&quot;</span>,cv2.IMREAD_GRAYSCALE)</span><br><span class="line">sobelx = cv2.Sobel(lena,cv2.CV_64F,<span class="number">1</span>,<span class="number">0</span>,ksize=<span class="number">3</span>)</span><br><span class="line">sobelx = cv2.convertScaleAbs(sobelx)</span><br><span class="line">sobely = cv2.Sobel(lena,cv2.CV_64F,<span class="number">0</span>,<span class="number">1</span>,ksize=<span class="number">3</span>)</span><br><span class="line">sobely = cv2.convertScaleAbs(sobely)</span><br><span class="line">sobelxy = cv2.addWeighted(sobelx,<span class="number">0.5</span>,sobely,<span class="number">0.5</span>,<span class="number">0</span>)</span><br><span class="line"><span class="comment"># cv_show(&quot;sobelxy&quot;,sobelxy)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#直接运算水平和垂直梯度</span></span><br><span class="line">sobelxy = cv2.Sobel(lena,cv2.CV_64F,<span class="number">1</span>,<span class="number">1</span>,ksize=<span class="number">3</span>)</span><br><span class="line">sobelxy = cv2.convertScaleAbs(sobelxy)</span><br><span class="line">cv_show(<span class="string">&quot;sobelxy&quot;</span>,sobelxy)</span><br></pre></td></tr></table></figure></div>

<p><strong>可以看出分开计算的梯度效果更好</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208161322781.png"
                      class="" title="image-20230208161322781"
                >

<h2 id="其他算子"><a href="#其他算子" class="headerlink" title="其他算子"></a>其他算子</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208162814034.png"
                      class="" title="image-20230208162814034"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208162818931.png"
                      class="" title="image-20230208162818931"
                >

<p>结果显示scharry算子和laplacian算子比sobel算子敏感，但</p>
<p>laplacian对白噪点很敏感，但白噪点并不一定是边缘，所以梯度不明显</p>
<h1 id="图像平滑处理"><a href="#图像平滑处理" class="headerlink" title="图像平滑处理"></a>图像平滑处理</h1><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">lena = cv2.imread(<span class="string">&quot;../pic/lenaNoise.png&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#均值滤波</span></span><br><span class="line">blur = cv2.blur(lena,(<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line">blur = np.hstack((lena,blur))</span><br><span class="line"><span class="comment"># cv_show(&quot;blur&quot;,blur)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方框滤波            normalize = True代表归一（平均）处理了，与均值滤波作用相同</span></span><br><span class="line">box = cv2.boxFilter(lena,-<span class="number">1</span>,(<span class="number">3</span>,<span class="number">3</span>),normalize=<span class="literal">True</span>)</span><br><span class="line">box = np.hstack((lena,box))</span><br><span class="line"><span class="comment"># cv_show(&quot;box&quot;,box)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#没有归一化处理，相加之后超过255的值取255，即白色</span></span><br><span class="line">box2 = cv2.boxFilter(lena,-<span class="number">1</span>,(<span class="number">3</span>,<span class="number">3</span>),normalize=<span class="literal">False</span>)</span><br><span class="line">box2 = np.hstack((lena,box2))</span><br><span class="line"><span class="comment"># cv_show(&quot;box&quot;,box)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#高斯滤波    数值满足高斯分布，更重视与该点相近的点的数值</span></span><br><span class="line">aussian = cv2.GaussianBlur(lena,(<span class="number">5</span>,<span class="number">5</span>),<span class="number">1</span>)</span><br><span class="line">aussian = np.hstack((lena,aussian))</span><br><span class="line"><span class="comment"># cv_show(&quot;aussian&quot;,aussian)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#中值滤波：将该点的指定矩阵中的值从小到大排序，选择中值</span></span><br><span class="line">median = cv2.medianBlur(lena,<span class="number">5</span>)</span><br><span class="line">median = np.hstack((lena,median))</span><br><span class="line"><span class="comment"># cv_show(&quot;median&quot;,median)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#所有的滤波展示</span></span><br><span class="line">res = np.hstack((blur,aussian,median))</span><br><span class="line">cv_show(<span class="string">&quot;res&quot;</span>,res)</span><br></pre></td></tr></table></figure></div>

<p><strong>均值滤波（方框滤波  normalize &#x3D; True）：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208175216977.png"
                      class="" title="image-20230208175216977"
                >

<p><strong>方框滤波 normalize &#x3D; False：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208175548495.png"
                      class="" title="image-20230208175548495"
                >

<p><strong>中值滤波：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208180931050.png"
                      class="" title="image-20230208180931050"
                >

<h1 id="阈值处理"><a href="#阈值处理" class="headerlink" title="阈值处理"></a>阈值处理</h1><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret,dst = cv2.threshold(src,thresh,maxval,<span class="built_in">type</span>)</span><br></pre></td></tr></table></figure></div>

<ul>
<li>src：输入图必须是灰度图</li>
<li>dst：输出图</li>
<li>type：阈值的操作<ul>
<li>THRESH_BINARY：超过阈值部分取maxval，否则取0</li>
<li>THRESH_BINARY_INV：与THRESH_BINARY相反</li>
<li>THRESH_TRUNC：大于阈值部分设为阈值，否则不变</li>
<li>THRESH_TOZERO：大于阈值部分不变，否则设为0</li>
<li>THRESH_TOZERO_INV：与THRESH_TOZERO相反</li>
</ul>
</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">cat = cv2.imread(<span class="string">&quot;../pic/cat.jpg&quot;</span>,cv2.IMREAD_GRAYSCALE)</span><br><span class="line"></span><br><span class="line"><span class="comment">#threshold函数中输入的图像是单通道图像，即灰度图；</span></span><br><span class="line"><span class="comment">#ret：阈值，thresh：返回图</span></span><br><span class="line">ret,thresh1 = cv2.threshold(cat,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_BINARY)</span><br><span class="line">ret,thresh2 = cv2.threshold(cat,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_BINARY_INV)</span><br><span class="line">ret,thresh3 = cv2.threshold(cat,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_TRUNC)</span><br><span class="line">ret,thresh4 = cv2.threshold(cat,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_TOZERO)</span><br><span class="line">ret,thresh5 = cv2.threshold(cat,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_TOZERO_INV)</span><br><span class="line"></span><br><span class="line">titles = [<span class="string">&#x27;original&#x27;</span>,<span class="string">&#x27;binary&#x27;</span>,<span class="string">&#x27;binary_inv&#x27;</span>,<span class="string">&#x27;trunc&#x27;</span>,<span class="string">&#x27;tozero&#x27;</span>,<span class="string">&#x27;tozero_inv&#x27;</span>]</span><br><span class="line">images = [cat,thresh1,thresh2,thresh3,thresh4,thresh5]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">    plt.subplot(<span class="number">2</span>,<span class="number">3</span>,i+<span class="number">1</span>),</span><br><span class="line">    plt.imshow(images[i],<span class="string">&#x27;gray&#x27;</span>),</span><br><span class="line">    plt.xticks([]),</span><br><span class="line">    plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208185656238.png"
                      class="" title="image-20230208185656238"
                >

<h1 id="Canny边缘检测"><a href="#Canny边缘检测" class="headerlink" title="Canny边缘检测"></a>Canny边缘检测</h1><ol>
<li>使用高斯滤波器消除噪声，因为噪声点与普通点间也有梯度</li>
<li>计算每个像素点的梯度强度和方向</li>
<li>应用非极大值抑制，消除边缘检测带来的杂散响应</li>
<li>应用双阈值检测来确定真实的和潜在的边缘</li>
<li>通过抑制孤立的边缘最终完成边缘检测</li>
</ol>
<h2 id="非极大值抑制"><a href="#非极大值抑制" class="headerlink" title="非极大值抑制"></a>非极大值抑制</h2><ol>
<li>通过C的梯度方向确定与C相邻的两个点，dTmp1和dTmp2，已知g1和g2的位置和梯度，可以计算dTmp1的梯度，dTmp2类似。<strong>若C的梯度大于dTmp1和dTmp2的梯度，就保留C</strong></li>
</ol>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208191920040.png"
                      class="" title="image-20230208191920040"
                >

<ol start="2">
<li>通过确定一点的梯度方向，选择该方向上离该点最近的两个点，分别计算梯度，该点大于最近的两点的梯度，保留该点的梯度，且边缘方向与梯度方向垂直</li>
</ol>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208192217028.png"
                      class="" title="image-20230208192217028"
                >

<h2 id="双阈值检测"><a href="#双阈值检测" class="headerlink" title="双阈值检测"></a>双阈值检测</h2><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">梯度值 &gt; maxVal：处理为边界</span><br><span class="line">minval &lt; 梯度值 &lt; maxVal：与边界相连则保留，否则舍弃</span><br><span class="line">梯度值 &lt; minVal：舍弃</span><br><span class="line"></span><br><span class="line">下图中：A C保留，B D舍弃</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208192814702.png"
                      class="" title="image-20230208192814702"
                >



<p><strong>代码：</strong>上述处理的综合</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">lena = cv2.imread(<span class="string">&quot;../pic/lena.jpg&quot;</span>,cv2.IMREAD_GRAYSCALE)</span><br><span class="line">v1 = cv2.Canny(lena,<span class="number">80</span>,<span class="number">150</span>)</span><br><span class="line">v2 = cv2.Canny(lena,<span class="number">50</span>,<span class="number">100</span>)</span><br><span class="line">res = np.hstack((v1,v2))</span><br><span class="line">cv_show(<span class="string">&quot;res&quot;</span>,res)</span><br><span class="line"></span><br><span class="line">car = cv2.imread(<span class="string">&quot;../pic/car.png&quot;</span>,cv2.IMREAD_GRAYSCALE)</span><br><span class="line">v1 = cv2.Canny(car,<span class="number">120</span>,<span class="number">250</span>)</span><br><span class="line">v2 = cv2.Canny(car,<span class="number">50</span>,<span class="number">100</span>)</span><br><span class="line">res = np.hstack((v1,v2))</span><br><span class="line">cv_show(<span class="string">&quot;res&quot;</span>,res)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208193712743.png"
                      class="" title="image-20230208193712743"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208193715339.png"
                      class="" title="image-20230208193715339"
                >

<p><strong>可见，阈值设置得越大，边缘检测得越少‘阈值设置越小，边缘检测越细致</strong></p>
<h1 id="轮廓检测"><a href="#轮廓检测" class="headerlink" title="轮廓检测"></a>轮廓检测</h1><p>边缘是断续的，轮廓一定是连续的</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.findContours(img,mode,method)</span><br></pre></td></tr></table></figure></div>

<p><strong>mode：轮廓检索模式</strong></p>
<ul>
<li>RETR_EXTERNAL：只检索最外面的轮廓</li>
<li>RETR_LIST：检索所有的轮廓，并将其保存到一条链表中</li>
<li>RETR_CCOMP：检索所有的轮廓，并将他们组织为两层：顶层是各部分的外部边界，第二层是空洞的边界</li>
<li><strong>RETR_TREE（推荐使用）</strong>：检索所有的轮廓，并重构嵌套轮廓的整个层次</li>
</ul>
<p><strong>method：轮廓逼近方法</strong></p>
<ul>
<li>CHAIN_APPROX_NONE：输出整个轮廓</li>
<li>CHAIN_APPROX_SIMPLE：输出部分轮廓</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/car.png&quot;</span>)</span><br><span class="line">gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)   <span class="comment">#为了更高的准确率，使用灰度图像</span></span><br><span class="line"><span class="comment">#找到</span></span><br><span class="line">ret,thresh = cv2.threshold(gray,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_BINARY)</span><br><span class="line"><span class="comment"># cv_show(&quot;thresh&quot;,thresh)</span></span><br><span class="line"></span><br><span class="line">binary,contours,hierarchy =cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_NONE) <span class="comment">#binary就是灰度图像；contours轮廓信息；hierarchy轮廓层级</span></span><br><span class="line"><span class="comment">#绘制轮廓，传入绘制图像，轮廓，轮廓索引，颜色模式，线条厚度</span></span><br><span class="line">draw_img = img.copy()   <span class="comment">#必须复制，否则会作用到原图</span></span><br><span class="line"><span class="comment">#-1指绘制所有轮廓，指定其他值可绘制对应的轮廓；（0，0，255）：用红色绘制；2：绘制宽度</span></span><br><span class="line"><span class="comment"># res = cv2.drawContours(draw_img,contours,-1,(0,0,255),2)</span></span><br><span class="line">res = cv2.drawContours(draw_img,contours,-<span class="number">1</span>,(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>),<span class="number">2</span>)</span><br><span class="line">cv_show(<span class="string">&quot;res&quot;</span>,res)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230208203325023.png"
                      class="" title="image-20230208203325023"
                >

<h1 id="轮廓近似"><a href="#轮廓近似" class="headerlink" title="轮廓近似"></a>轮廓近似</h1><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/contours2.png&quot;</span>)</span><br><span class="line">gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)</span><br><span class="line">ret,thresh = cv2.threshold(gray,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_BINARY)</span><br><span class="line">binary,contours,hieraychy = cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_NONE)</span><br><span class="line"><span class="comment"># print(contours)</span></span><br><span class="line"></span><br><span class="line">cnt = contours[<span class="number">0</span>]</span><br><span class="line">draw_img = img.copy()</span><br><span class="line">res = cv2.drawContours(draw_img,[cnt],-<span class="number">1</span>,(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>),<span class="number">2</span>)       <span class="comment">#轮廓</span></span><br><span class="line"><span class="comment"># cv_show(&quot;res&quot;,res)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#面积，不能传入整个contours数组，要取数组元素</span></span><br><span class="line"><span class="comment"># S = cv2.contourArea(cnt)</span></span><br><span class="line"><span class="comment">#周长</span></span><br><span class="line">epsilon = <span class="number">0.1</span> * cv2.arcLength(cnt,<span class="literal">True</span>)                       <span class="comment">#表示近似的精确性，是原始轮廓和近似轮廓之间的最大值；True表示闭合</span></span><br><span class="line">approx = cv2.approxPolyDP(cnt,epsilon,<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">draw_img = img.copy()</span><br><span class="line">res = cv2.drawContours(draw_img,[approx],-<span class="number">1</span>,(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>),<span class="number">2</span>)</span><br><span class="line">cv_show(<span class="string">&quot;res&quot;</span>,res)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209114624319.png"
                      class="" title="image-20230209114624319"
                >

<h1 id="外界图形"><a href="#外界图形" class="headerlink" title="外界图形"></a>外界图形</h1><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">img1 = cv2.imread(<span class="string">&quot;../pic/contours.png&quot;</span>)</span><br><span class="line">gray = cv2.cvtColor(img1,cv2.COLOR_BGR2GRAY)</span><br><span class="line">ret,thresh = cv2.threshold(gray,<span class="number">127</span>,<span class="number">255</span>,cv2.THRESH_BINARY)</span><br><span class="line">binary,contours,hierarchy = cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_NONE)</span><br><span class="line">cnt = contours[<span class="number">0</span>]         <span class="comment">#一张图片可能有多个轮廓，每个轮廓有内外两个轮廓，用contours数组下标表示</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#外界矩阵</span></span><br><span class="line">x,y,w,h = cv2.boundingRect(cnt)        <span class="comment">#计算并返回外接矩形，返回的变量可以绘制矩形；w是两点间的水平距离，h是两点间的垂直距离</span></span><br><span class="line">img1 = cv2.rectangle(img1,(x,y),(x+w,y+h),(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>),<span class="number">2</span>)         <span class="comment">#绘制矩形</span></span><br><span class="line"><span class="comment"># cv_show(&quot;img1&quot;,img1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#轮廓面积与边界矩形比</span></span><br><span class="line">area = cv2.contourArea(cnt)</span><br><span class="line">rect_area = w * h</span><br><span class="line">extent = <span class="built_in">float</span>(area) / rect_area</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;轮廓面积与边界矩形比&quot;</span>,extent)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#外接圆</span></span><br><span class="line">(x,y),radius = cv2.minEnclosingCircle(cnt)      <span class="comment">#返回圆心和半径</span></span><br><span class="line">center = (<span class="built_in">int</span>(x),<span class="built_in">int</span>(y))</span><br><span class="line">radius = <span class="built_in">int</span>(radius)</span><br><span class="line">img1 = cv2.circle(img1,center,radius,(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>),<span class="number">2</span>)</span><br><span class="line">cv_show(<span class="string">&quot;img1&quot;</span>,img1)</span><br></pre></td></tr></table></figure></div>

<p><strong>cnt[0]外界图形：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209114707171.png"
                      class="" title="image-20230209114707171"
                >

<p><strong>cnt[2]外界图形：</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209114721812.png"
                      class="" title="image-20230209114721812"
                >

<h1 id="模板匹配"><a href="#模板匹配" class="headerlink" title="模板匹配"></a>模板匹配</h1><p>类似于卷积原理，将模板从图片左上角到右下角依次对比，找到最接近模板的位置。若原图形是A * B大小，模板是a * b大小，则输出结果的矩阵是（A-a+1）<em>（B-b+1）。*<em>找到最符合模板的左上角的一点，根据模板的长宽绘制矩形</em></em></p>
<ul>
<li>TM__SQDIFF：计算平方不同，计算结果越小越相关</li>
<li>TM_CCORR：计算相关性，计算结果越大越相关</li>
<li>TM_CCOEFF：计算相关系数，计算结果越大越相关</li>
<li>TM__SQDIFF_NORMED：归一化，计算结果越接近0越相关</li>
<li>TM_CCORR_NORMED：归一化，计算结果越接近1 越相关</li>
<li>TM_CCOEFF_NORMED：归一化，计算结果越接近1越相关</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"><span class="comment">#模板匹配</span></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/lena.jpg&quot;</span>)</span><br><span class="line">template = cv2.imread(<span class="string">&quot;../pic/face.png&quot;</span>)</span><br><span class="line">h,w = template.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">methods  = [<span class="string">&#x27;cv2.TM_CCOEFF&#x27;</span>,<span class="string">&#x27;cv2.TM_CCOEFF_NORMED&#x27;</span>,<span class="string">&#x27;cv2.TM_CCORR&#x27;</span>,<span class="string">&#x27;cv2.TM_CCORR_NORMED&#x27;</span>,<span class="string">&quot;cv2.TM_SQDIFF&quot;</span>,<span class="string">&quot;cv2.TM_SQDIFF_NORMED&quot;</span>]</span><br><span class="line">res = cv2.matchTemplate(img,template,cv2.TM_CCORR)</span><br><span class="line"><span class="built_in">print</span>(res.shape)</span><br><span class="line"></span><br><span class="line"><span class="comment"># min_val,max_val,min_loc,max_loc = cv2.minMaxLoc(res)</span></span><br><span class="line"><span class="comment"># print(min_val)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> meth <span class="keyword">in</span> methods:</span><br><span class="line">    img1 = img.copy()</span><br><span class="line">    method = <span class="built_in">eval</span>(meth)               <span class="comment">#method中的元素是字符串，要转换为真值</span></span><br><span class="line">    res = cv2.matchTemplate(img1,template,method)               <span class="comment">#一个一个地与模板进行匹配，保存到数组中</span></span><br><span class="line">    min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(res)     <span class="comment">#从数组中找到最大或最大的位置</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#SQDIFF确定左上角点要取minMaxLoc函数的min_loc</span></span><br><span class="line">    <span class="keyword">if</span> method <span class="keyword">in</span> [cv2.TM_SQDIFF,cv2.TM_SQDIFF_NORMED]:</span><br><span class="line">        top_left = min_loc</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        top_left = max_loc</span><br><span class="line">    bottm_right = (top_left[<span class="number">0</span>] + w,top_left[<span class="number">1</span>] + h)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#绘制矩形</span></span><br><span class="line">    cv2.rectangle(img1,top_left,bottm_right,(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>),<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    plt.subplot(<span class="number">121</span>),plt.imshow(res,cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.xticks([]),plt.yticks([])     <span class="comment">#隐藏坐标轴</span></span><br><span class="line">    plt.subplot(<span class="number">122</span>),plt.imshow(img1,cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">    plt.xticks([]),plt.yticks([])</span><br><span class="line">    plt.suptitle(meth)</span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209131703269.png"
                      class="" title="image-20230209131703269"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209131718238.png"
                      class="" title="image-20230209131718238"
                >

<h2 id="匹配多个对象"><a href="#匹配多个对象" class="headerlink" title="匹配多个对象"></a>匹配多个对象</h2><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#匹配多个对象</span></span><br><span class="line">img_mario = cv2.imread(<span class="string">&quot;../pic/mario.png&quot;</span>)</span><br><span class="line"><span class="comment"># img_mario_gray = cv2.cvtColor(img_mario,cv2.COLOR_BGR2GRAY)</span></span><br><span class="line">template1 = cv2.imread(<span class="string">&quot;../pic/gold.png&quot;</span>)</span><br><span class="line">h,w = template.shape[:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">res = cv2.matchTemplate(img_mario,template1,cv2.TM_CCOEFF_NORMED)    <span class="comment">#返回的就是与模板匹配的数组</span></span><br><span class="line">threshold = <span class="number">0.8</span></span><br><span class="line"><span class="comment">#取匹配程度的大于%80的坐标</span></span><br><span class="line">loc = np.where(res &gt;= threshold)</span><br><span class="line"><span class="keyword">for</span> pt <span class="keyword">in</span> <span class="built_in">zip</span>(*loc[::-<span class="number">1</span>]):               <span class="comment">#zip函数返回一个以元组为元素的列表，其中第 i 个元组包含每个参数序列的第 i 个元素。返回的列表长度被截断为最短的参数序列的长度。</span></span><br><span class="line">    bottom_right = (pt[<span class="number">0</span>] + w,pt[<span class="number">1</span>] + h)</span><br><span class="line">    cv2.rectangle(img_mario,pt,bottom_right,(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>),<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">cv_show(<span class="string">&quot;img_mario&quot;</span>,img_mario)</span><br></pre></td></tr></table></figure></div>

<h1 id="图像金字塔"><a href="#图像金字塔" class="headerlink" title="图像金字塔"></a>图像金字塔</h1><h2 id="高斯金字塔"><a href="#高斯金字塔" class="headerlink" title="高斯金字塔"></a>高斯金字塔</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209141121285.png"
                      class="" title="image-20230209141121285"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209141200376.png"
                      class="" title="image-20230209141200376"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209141203373.png"
                      class="" title="image-20230209141203373"
                >

<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/AM.png&quot;</span>)</span><br><span class="line"><span class="comment">#高斯金字塔向上采样，用0扩充再卷积，信息减少</span></span><br><span class="line">up = cv2.pyrUp(img)</span><br><span class="line"><span class="comment"># cv_show(&quot;up&quot;,up)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#高斯金字塔乡下采样，先卷积再归一化，信息减少</span></span><br><span class="line">down = cv2.pyrDown(img)</span><br><span class="line"><span class="comment"># cv_show(&quot;down&quot;,down)</span></span><br><span class="line"></span><br><span class="line">up2 = cv2.pyrUp(up)</span><br><span class="line"><span class="comment"># cv_show(&quot;up2&quot;,up2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#先向上采样，再向下采样</span></span><br><span class="line">up_down = cv2.pyrDown(up)</span><br><span class="line">res = np.hstack((img,up_down))</span><br><span class="line">cv_show(<span class="string">&quot;res&quot;</span>,res)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209143000577.png"
                      class="" title="image-20230209143000577"
                >

<h2 id="拉普拉斯金字塔"><a href="#拉普拉斯金字塔" class="headerlink" title="拉普拉斯金字塔"></a>拉普拉斯金字塔</h2><p><code>原图像 - 先向下采样再向上采样的图像</code></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209143138032-16759242982013.png"
                      class="" title="image-20230209143138032"
                >

<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">down1 = cv2.pyrDown(img_l_l)</span><br><span class="line">down_up = cv2.pyrUp(down1)</span><br><span class="line">l_l= img_l_l - down_up</span><br><span class="line">cv_show(<span class="string">&quot;l_l&quot;</span>,l_l)</span><br></pre></td></tr></table></figure></div>



<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209143947478.png"
                      class="" title="image-20230209143947478"
                >

<h1 id="示例：文档扫描OCR识别"><a href="#示例：文档扫描OCR识别" class="headerlink" title="示例：文档扫描OCR识别"></a>示例：文档扫描OCR识别</h1><ol>
<li><p>图片预处理：<code>转为灰度图 - 高斯滤波去除噪点 - 边缘检测 - 轮廓检测</code></p>
</li>
<li><p>选择轮廓：实际情况可能会画出多个轮廓，通过遍历轮廓，选择对应的轮廓</p>
</li>
<li><p>将轮廓四点按比例变换rect - 确定四点的位置 - 计算经变化后的长宽 - 确定四点将要变换的坐标dst</p>
</li>
<li><p>根据rect和dst，计算变换矩阵，将变换矩阵运用到图片中</p>
</li>
<li><p>根据原图大小，resize经变换矩阵变换的图片</p>
</li>
</ol>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入工具包</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置参数</span></span><br><span class="line">ap = argparse.ArgumentParser()</span><br><span class="line">ap.add_argument(<span class="string">&quot;-i&quot;</span>, <span class="string">&quot;--image&quot;</span>, required = <span class="literal">True</span>,</span><br><span class="line">   <span class="built_in">help</span> = <span class="string">&quot;Path to the image to be scanned&quot;</span>) </span><br><span class="line">args = <span class="built_in">vars</span>(ap.parse_args())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">order_points</span>(<span class="params">pts</span>):</span><br><span class="line">   <span class="comment"># 一共4个坐标点</span></span><br><span class="line">   rect = np.zeros((<span class="number">4</span>, <span class="number">2</span>), dtype = <span class="string">&quot;float32&quot;</span>)      <span class="comment">#定义了一个二维数组</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># 按顺序找到对应坐标0123分别是 左上，右上，右下，左下</span></span><br><span class="line">   <span class="comment"># 计算左上，右下</span></span><br><span class="line">   <span class="comment">#将pts中的每个点横纵坐标分别相加，生成一个一维矩阵</span></span><br><span class="line">   s = pts.<span class="built_in">sum</span>(axis = <span class="number">1</span>)                   <span class="comment">#axis=1代表将一个矩阵的每一行的值相加，生成一个新的一维矩阵</span></span><br><span class="line">   <span class="comment">#s中最小的是左上，最大的是右下</span></span><br><span class="line">   rect[<span class="number">0</span>] = pts[np.argmin(s)]</span><br><span class="line">   rect[<span class="number">2</span>] = pts[np.argmax(s)]</span><br><span class="line"></span><br><span class="line">   <span class="comment"># 计算右上和左下</span></span><br><span class="line">   diff = np.diff(pts, axis = <span class="number">1</span>)           <span class="comment">#将pts中的每个点的纵横坐标相减，axis=1代表每一行</span></span><br><span class="line">   rect[<span class="number">1</span>] = pts[np.argmin(diff)]</span><br><span class="line">   rect[<span class="number">3</span>] = pts[np.argmax(diff)]</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> rect</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">four_point_transform</span>(<span class="params">image, pts</span>):</span><br><span class="line">   <span class="comment"># 获取输入坐标点，将四个点分为左上，右上，左下，右下</span></span><br><span class="line">   rect = order_points(pts)</span><br><span class="line">   (tl, tr, br, bl) = rect</span><br><span class="line"></span><br><span class="line">   <span class="comment"># 计算输入的w和h值     两点间坐标</span></span><br><span class="line">   widthA = np.sqrt(((br[<span class="number">0</span>] - bl[<span class="number">0</span>]) ** <span class="number">2</span>) + ((br[<span class="number">1</span>] - bl[<span class="number">1</span>]) ** <span class="number">2</span>))</span><br><span class="line">   widthB = np.sqrt(((tr[<span class="number">0</span>] - tl[<span class="number">0</span>]) ** <span class="number">2</span>) + ((tr[<span class="number">1</span>] - tl[<span class="number">1</span>]) ** <span class="number">2</span>))</span><br><span class="line">   maxWidth = <span class="built_in">max</span>(<span class="built_in">int</span>(widthA), <span class="built_in">int</span>(widthB))          <span class="comment">#取两组长度中的大的</span></span><br><span class="line"></span><br><span class="line">   heightA = np.sqrt(((tr[<span class="number">0</span>] - br[<span class="number">0</span>]) ** <span class="number">2</span>) + ((tr[<span class="number">1</span>] - br[<span class="number">1</span>]) ** <span class="number">2</span>))</span><br><span class="line">   heightB = np.sqrt(((tl[<span class="number">0</span>] - bl[<span class="number">0</span>]) ** <span class="number">2</span>) + ((tl[<span class="number">1</span>] - bl[<span class="number">1</span>]) ** <span class="number">2</span>))</span><br><span class="line">   maxHeight = <span class="built_in">max</span>(<span class="built_in">int</span>(heightA), <span class="built_in">int</span>(heightB))</span><br><span class="line"></span><br><span class="line">   <span class="comment"># 变换后对应坐标位置</span></span><br><span class="line">   dst = np.array([</span><br><span class="line">      [<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">      [maxWidth - <span class="number">1</span>, <span class="number">0</span>],</span><br><span class="line">      [maxWidth - <span class="number">1</span>, maxHeight - <span class="number">1</span>],</span><br><span class="line">      [<span class="number">0</span>, maxHeight - <span class="number">1</span>]], dtype = <span class="string">&quot;float32&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="comment"># 计算变换矩阵    rect是经原图变换的坐标，dst是最后要变换的坐标</span></span><br><span class="line">   M = cv2.getPerspectiveTransform(rect, dst)</span><br><span class="line">   warped = cv2.warpPerspective(image, M, (maxWidth, maxHeight))     <span class="comment">#将图像应用卷积变换</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># 返回变换后结果</span></span><br><span class="line">   <span class="keyword">return</span> warped</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">resize</span>(<span class="params">image, width=<span class="literal">None</span>, height=<span class="literal">None</span>, inter=cv2.INTER_AREA</span>):</span><br><span class="line">   dim = <span class="literal">None</span></span><br><span class="line">   (h, w) = image.shape[:<span class="number">2</span>]</span><br><span class="line">   <span class="keyword">if</span> width <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">and</span> height <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">      <span class="keyword">return</span> image</span><br><span class="line">   <span class="keyword">if</span> width <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">      r = height / <span class="built_in">float</span>(h)</span><br><span class="line">      dim = (<span class="built_in">int</span>(w * r), height)</span><br><span class="line">   <span class="keyword">else</span>:</span><br><span class="line">      r = width / <span class="built_in">float</span>(w)</span><br><span class="line">      dim = (width, <span class="built_in">int</span>(h * r))</span><br><span class="line">   resized = cv2.resize(image, dim, interpolation=inter)</span><br><span class="line">   <span class="keyword">return</span> resized</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取输入</span></span><br><span class="line"><span class="comment"># image = cv2.imread(args[&quot;image&quot;])</span></span><br><span class="line">image = cv2.imread(<span class="string">&quot;images/page.jpg&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#原图形状可能不规则，可以通过变换提取原图中的图形，记录变换比例以还原原图中的图形为原图大小</span></span><br><span class="line">ratio = image.shape[<span class="number">0</span>] / <span class="number">500.0</span></span><br><span class="line">orig = image.copy()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">image = resize(orig, height = <span class="number">500</span>)      <span class="comment">#记录高的变化就可以，宽变化比例一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 预处理</span></span><br><span class="line">gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)</span><br><span class="line">gray = cv2.GaussianBlur(gray, (<span class="number">5</span>, <span class="number">5</span>), <span class="number">0</span>)     <span class="comment">#高斯滤波去除噪音</span></span><br><span class="line">edged = cv2.Canny(gray, <span class="number">75</span>, <span class="number">200</span>)             <span class="comment">#边缘检测</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 展示预处理结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;STEP 1: 边缘检测&quot;</span>)</span><br><span class="line"><span class="comment"># cv2.imshow(&quot;Image&quot;, image)</span></span><br><span class="line"><span class="comment"># cv2.imshow(&quot;Edged&quot;, edged)</span></span><br><span class="line"><span class="comment"># cv2.waitKey(0)</span></span><br><span class="line"><span class="comment"># cv2.destroyAllWindows()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 轮廓检测    RETR_LIST：检测所有轮廓并保存到一个链表中</span></span><br><span class="line">cnts = cv2.findContours(edged.copy(), cv2.RETR_LIST, cv2.CHAIN_APPROX_SIMPLE)[<span class="number">1</span>]</span><br><span class="line">cnts = <span class="built_in">sorted</span>(cnts, key = cv2.contourArea, reverse = <span class="literal">True</span>)[:<span class="number">5</span>]          <span class="comment">#reverse为True：降序</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历轮廓</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> cnts:</span><br><span class="line">   <span class="comment"># 计算轮廓近似</span></span><br><span class="line">   peri = cv2.arcLength(c, <span class="literal">True</span>)</span><br><span class="line">   <span class="comment"># C表示输入的点集</span></span><br><span class="line">   <span class="comment"># epsilon表示从原始轮廓到近似轮廓的最大距离，它是一个准确度参数</span></span><br><span class="line">   <span class="comment"># True表示封闭的</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">#需要注意，需要观察现象手动调整轮廓近似中的参数（0.02）</span></span><br><span class="line">   approx = cv2.approxPolyDP(c, <span class="number">0.02</span> * peri, <span class="literal">True</span>)            <span class="comment">#返回的是轮廓，不能直接绘制</span></span><br><span class="line">   <span class="comment"># res = cv2.drawContours(image,[approx],-1,(0,0,255),2)</span></span><br><span class="line">   <span class="comment"># cv2.imshow(&quot;res&quot;, res)</span></span><br><span class="line">   <span class="comment"># cv2.waitKey(0)</span></span><br><span class="line">   <span class="comment"># cv2.destroyAllWindows()</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># 4个点的时候就拿出来</span></span><br><span class="line">   <span class="keyword">if</span> <span class="built_in">len</span>(approx) == <span class="number">4</span>:</span><br><span class="line">      screenCnt = approx</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 展示结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;STEP 2: 获取轮廓&quot;</span>)</span><br><span class="line">cv2.drawContours(image, [screenCnt], -<span class="number">1</span>, (<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>)</span><br><span class="line">cv2.imshow(<span class="string">&quot;Outline&quot;</span>, image)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 透视变换</span></span><br><span class="line">warped = four_point_transform(orig, screenCnt.reshape(<span class="number">4</span>, <span class="number">2</span>) * ratio)       <span class="comment">#将原图中的四个点按比例变化</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 二值处理   文字纸张对比更清楚</span></span><br><span class="line">warped = cv2.cvtColor(warped, cv2.COLOR_BGR2GRAY)</span><br><span class="line">ref = cv2.threshold(warped, <span class="number">100</span>, <span class="number">255</span>, cv2.THRESH_BINARY)[<span class="number">1</span>]</span><br><span class="line">cv2.imwrite(<span class="string">&#x27;scan.jpg&#x27;</span>, ref)</span><br><span class="line"><span class="comment"># 展示结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;STEP 3: 变换&quot;</span>)</span><br><span class="line">cv2.imshow(<span class="string">&quot;Original&quot;</span>, resize(orig, height = <span class="number">650</span>))              <span class="comment">#放大到原图大小</span></span><br><span class="line">cv2.imshow(<span class="string">&quot;Scanned&quot;</span>, resize(ref, height = <span class="number">650</span>))</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230209174228235.png"
                      class="" title="image-20230209174228235"
                >

<p><strong>注意：还可以使用tesseract等工具包对纸张内容进行识别</strong></p>
<h1 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h1><p><strong>通过直方图统计图片像素点的相同的值</strong></p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.calcHist(image,channels,mask,histSize,ranges)</span><br></pre></td></tr></table></figure></div>

<ul>
<li>channels：[0],[1],[2]分别表示BGR</li>
<li>mask：图片中需要绘制直方图的部分</li>
<li>histSize：直方图的X轴（256个值，一般默认）</li>
<li>ranges：像素值范围（256个值，一般默认）</li>
</ul>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210111500702.png"
                      class="" title="image-20230210111500702"
                >

<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;../pic/cat.jpg&#x27;</span>,<span class="number">0</span>)  <span class="comment">#0表示灰度图</span></span><br><span class="line">hist = cv2.calcHist([img],[<span class="number">0</span>],<span class="literal">None</span>,[<span class="number">256</span>],[<span class="number">256</span>])</span><br><span class="line"></span><br><span class="line">color = (<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;g&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i,col <span class="keyword">in</span> <span class="built_in">enumerate</span>(color):</span><br><span class="line">    histr = cv2.calcHist([img],[i],<span class="literal">None</span>,[<span class="number">256</span>],[<span class="number">0</span>,<span class="number">256</span>])</span><br><span class="line">    plt.plot(histr,color = col)</span><br><span class="line">    plt.xlim([<span class="number">0</span>,<span class="number">256</span>])</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210113356587.png"
                      class="" title="image-20230210113356587"
                >

<h2 id="mask的使用"><a href="#mask的使用" class="headerlink" title="mask的使用"></a>mask的使用</h2><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;../pic/cat.jpg&#x27;</span>,<span class="number">0</span>)  <span class="comment">#0表示灰度图</span></span><br><span class="line"><span class="comment"># print(img)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建mask,与原图大小一致</span></span><br><span class="line">mask = np.zeros(img.shape[:<span class="number">2</span>],np.uint8)            <span class="comment">#创建了原图长宽大小的数值全为0的矩阵</span></span><br><span class="line">mask[<span class="number">100</span>:<span class="number">300</span>,<span class="number">100</span>:<span class="number">400</span>] = <span class="number">255</span>             <span class="comment">#mask的操作，将需要显示的部分置白</span></span><br><span class="line">cv_show(<span class="string">&quot;mask&quot;</span>,mask)</span><br><span class="line"></span><br><span class="line"><span class="comment">#与操作，因为mask像素点的值只有0和255两个数值，原图的像素点和0进行与操作就会将不需要的部分置为0</span></span><br><span class="line">masked_img = cv2.bitwise_and(img,img,mask=mask)</span><br><span class="line">cv_show(<span class="string">&quot;mask_img&quot;</span>,masked_img)</span><br><span class="line"></span><br><span class="line">hist_full = cv2.calcHist([img],[<span class="number">0</span>],<span class="literal">None</span>,[<span class="number">256</span>],[<span class="number">0</span>,<span class="number">256</span>])          <span class="comment">#变量必须用[]包含</span></span><br><span class="line">hist_mask = cv2.calcHist([img],[<span class="number">0</span>],mask,[<span class="number">256</span>],[<span class="number">0</span>,<span class="number">256</span>])</span><br><span class="line">plt.subplot(<span class="number">221</span>), plt.imshow(img,<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">222</span>), plt.imshow(mask,<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">223</span>), plt.imshow(masked_img,<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.subplot(<span class="number">224</span>), plt.plot(hist_full),plt.plot(hist_mask)</span><br><span class="line">plt.xlim([<span class="number">0</span>,<span class="number">256</span>])                                           <span class="comment">#设置x轴的取值范围</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210115022651.png"
                      class="" title="image-20230210115022651"
                >

<h2 id="均衡化"><a href="#均衡化" class="headerlink" title="均衡化"></a>均衡化</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210115806340.png"
                      class="" title="image-20230210115806340"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210115954702.png"
                      class="" title="image-20230210115954702"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210120014534.png"
                      class="" title="image-20230210120014534"
                >

<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;../pic/cat.jpg&#x27;</span>,<span class="number">0</span>)  <span class="comment">#0表示灰度图</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#均衡化          hist绘制直方图，用法是hist（y，x），表示以向量x的各个元素为统计范围，绘制y的分布情况。</span></span><br><span class="line">plt.hist(img.ravel(),<span class="number">256</span>)       <span class="comment">#ravel是多维数据展平函数，这里将图片的像素点的值展成一维</span></span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line">equ = cv2.equalizeHist(img)              <span class="comment">#均衡化直方图</span></span><br><span class="line">plt.hist(equ.ravel(),<span class="number">256</span>)</span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line">res = np.hstack((img,equ))</span><br><span class="line">cv_show(<span class="string">&quot;res&quot;</span>,res)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210121903677.png"
                      class="" title="image-20230210121903677"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210121935985.png"
                      class="" title="image-20230210121935985"
                >

<p><strong>注意：均衡化会因为平均操作丢失细节，但可以提高亮度</strong></p>
<h3 id="自适应均衡化"><a href="#自适应均衡化" class="headerlink" title="自适应均衡化"></a>自适应均衡化</h3><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#自适应均衡化             clipLimit：颜色对比度的阈值,默认值 8titleGridSize：局部直方图均衡化的模板大小，默认值 (8,8)</span></span><br><span class="line"><span class="comment">#将图片划分为多个方格，每个方格分别均衡化。方格间的边界可能会更明晰，但createCLAHE会自动处理，提高亮度的同时，保存更多细节</span></span><br><span class="line">clahe = cv2.createCLAHE(clipLimit=<span class="number">2.0</span>,tileGridSize=(<span class="number">8</span>,<span class="number">8</span>))</span><br><span class="line">res_clahe = clahe.apply(img)</span><br><span class="line">res = np.hstack((img,equ,res_clahe))</span><br><span class="line">cv_show(<span class="string">&quot;res&quot;</span>,res)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210123034000.png"
                      class="" title="image-20230210123034000"
                >

<h1 id="傅里叶变换"><a href="#傅里叶变换" class="headerlink" title="傅里叶变换"></a>傅里叶变换</h1><p><strong>作用：将图像处理为高频和低频两部分，图像变换更容易</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210132239516.png"
                      class="" title="image-20230210132239516"
                >

<ul>
<li>高频：变化剧烈的灰度分量，例如边界</li>
<li>低频：变化缓慢的灰度分量</li>
</ul>
<h2 id="滤波"><a href="#滤波" class="headerlink" title="滤波"></a>滤波</h2><ul>
<li><p>低通滤波器：只保留低频，使得图像模糊</p>
</li>
<li><p>高通滤波器：只保留高频，使得图像细节增强</p>
</li>
<li><p>opencv中主要就是**cv2.dft()<strong>和</strong>cv2.idft()**，输入图像需要先转换成np.float32格式。</p>
</li>
<li><p>得到的结果中频率为0的部分会在左上角，通常要转换到中心位置，可以通过shift变换来实现。</p>
</li>
<li><p>cv2.dft()返回的结果是双通道的（实部，虚部)，通常还需要转换成图像格式才能展示(0.255)。</p>
</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;../pic/lena.jpg&#x27;</span>,<span class="number">0</span>)</span><br><span class="line"><span class="comment">#将执行傅里叶变换的图片转为float32类型</span></span><br><span class="line">img_float32 = np.float32(img)</span><br><span class="line"><span class="comment">#傅里叶变换</span></span><br><span class="line">dft = cv2.dft(img_float32,flags=cv2.DFT_COMPLEX_OUTPUT)</span><br><span class="line"><span class="comment">#将傅里叶变换结果中的低频点转到坐标轴的原点</span></span><br><span class="line">dft_shift = np.fft.fftshift(dft)      <span class="comment">#使用fft函数对余弦波信号进行傅里叶变换。</span></span><br><span class="line"><span class="comment">#cv2.dft()返回的结果是双通道的（实部，虚部)，通常还需要转换成图像格式才能展示(0.255)。</span></span><br><span class="line">magnitude_spectrum = <span class="number">20</span> * np.log(cv2.magnitude(dft_shift[:,:,<span class="number">0</span>],dft_shift[:,:,<span class="number">1</span>]))      <span class="comment">#magnitude函数：计算二维数组的最大值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.subplot(121),plt.imshow(img,cmap=&#x27;gray&#x27;)</span></span><br><span class="line"><span class="comment"># plt.title(&#x27;Input image&#x27;),plt.xticks([]),plt.yticks([])</span></span><br><span class="line"><span class="comment"># plt.subplot(122),plt.imshow(magnitude_spectrum,&#x27;gray&#x27;)</span></span><br><span class="line"><span class="comment"># plt.title(&#x27;Magnitude Spectrum&#x27;),plt.xticks([]),plt.yticks([])</span></span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#低频滤波</span></span><br><span class="line">rows,cols = img.shape</span><br><span class="line">crow,ccol = <span class="built_in">int</span>(rows/<span class="number">2</span>),<span class="built_in">int</span>(cols/<span class="number">2</span>)</span><br><span class="line">mask = np.zeros((rows,cols,<span class="number">2</span>),np.uint8)      <span class="comment">#创建与原图大小一致的图像</span></span><br><span class="line">mask[crow-<span class="number">30</span>:crow+<span class="number">30</span>,ccol-<span class="number">30</span>:ccol+<span class="number">30</span>] = <span class="number">1</span>    <span class="comment">#将中点附近的像素点置1</span></span><br><span class="line">fshift = dft_shift * mask                   <span class="comment">#通过与mask相乘，就只剩下了中间的区域，即低频</span></span><br><span class="line">f_ishift = np.fft.ifftshift(fshift)         <span class="comment">#将原点转为原图原来的位置</span></span><br><span class="line">img_back = cv2.idft(f_ishift)               <span class="comment">#傅里叶变换逆变换</span></span><br><span class="line">img_back = cv2.magnitude(img_back[:,:,<span class="number">0</span>],img_back[:,:,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.subplot(121),plt.imshow(img,cmap=&#x27;gray&#x27;)</span></span><br><span class="line"><span class="comment"># plt.title(&#x27;Input image&#x27;),plt.xticks([]),plt.yticks([])</span></span><br><span class="line"><span class="comment"># plt.subplot(122),plt.imshow(img_back,&#x27;gray&#x27;)</span></span><br><span class="line"><span class="comment"># plt.title(&#x27;result&#x27;),plt.xticks([]),plt.yticks([])</span></span><br><span class="line"><span class="comment"># plt.show()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#高频滤波</span></span><br><span class="line">rows1,cols1 = img.shape</span><br><span class="line">crow1,ccol1 = <span class="built_in">int</span>(rows1/<span class="number">2</span>),<span class="built_in">int</span>(cols1/<span class="number">2</span>)</span><br><span class="line">mask = np.ones((rows1,cols1,<span class="number">2</span>),np.uint8)      <span class="comment">#创建与原图大小一致的图像</span></span><br><span class="line">mask[crow1-<span class="number">30</span>:crow1+<span class="number">30</span>,ccol1-<span class="number">30</span>:ccol1+<span class="number">30</span>] = <span class="number">0</span>    <span class="comment">#将中点附近的像素点置0</span></span><br><span class="line">fshift = dft_shift * mask                   <span class="comment">#通过与mask相乘，去除了中间的区域，即高频</span></span><br><span class="line">f_ishift = np.fft.ifftshift(fshift)         <span class="comment">#将原点转为原图原来的位置</span></span><br><span class="line">img_back = cv2.idft(f_ishift)               <span class="comment">#傅里叶变换逆变换</span></span><br><span class="line">img_back = cv2.magnitude(img_back[:,:,<span class="number">0</span>],img_back[:,:,<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img,cmap=<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Input image&#x27;</span>),plt.xticks([]),plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">122</span>),plt.imshow(img_back,<span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;result&#x27;</span>),plt.xticks([]),plt.yticks([])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210142515372.png"
                      class="" title="image-20230210142515372"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210142528105.png"
                      class="" title="image-20230210142528105"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210142539670.png"
                      class="" title="image-20230210142539670"
                >

<h1 id="harris角点检测"><a href="#harris角点检测" class="headerlink" title="harris角点检测"></a>harris角点检测</h1><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210143021902.png"
                      class="" title="image-20230210143021902"
                >

<ul>
<li>角点：任意方向的灰度变化都很明显</li>
<li>边界：某一方向灰度变化不明显</li>
</ul>
<p><strong>I(x,y)：灰度值；W(x,y)：可以表示该点与结果的相关程度</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210151203769.png"
                      class="" title="image-20230210151203769"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210151210488.png"
                      class="" title="image-20230210151210488"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210151216141-16760131363414.png"
                      class="" title="image-20230210151216141"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210151223178.png"
                      class="" title="image-20230210151223178"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210151228881.png"
                      class="" title="image-20230210151228881"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210151327622.png"
                      class="" title="image-20230210151327622"
                >

<p><code>cv2.cornerHarris(img,blockSize,ksize,k)</code></p>
<ul>
<li>blockSize：检测角点的区域大小</li>
<li>用Sobel算子求导数用的窗口大小</li>
<li>k：计算角点响应值时，<code>λ1*λ2 - k*(λ1+λ2)</code>     k一般取值为[0.04,0.06]</li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;../pic/house.png&#x27;</span>)</span><br><span class="line">gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)</span><br><span class="line"><span class="comment">#角点检测</span></span><br><span class="line">dst = cv2.cornerHarris(gray,<span class="number">2</span>,<span class="number">3</span>,<span class="number">0.04</span>)</span><br><span class="line"><span class="comment">#cornerHarris返回的是检测的角点，dst.max()是角点中的最大值，以此为标准在img中绘制角点</span></span><br><span class="line">img[dst &gt; <span class="number">0.01</span> * dst.<span class="built_in">max</span>()] = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>]</span><br><span class="line">cv2.imshow(<span class="string">&quot;img&quot;</span>,img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210153336999.png"
                      class="" title="image-20230210153336999"
                >

<h1 id="特征提取SIFT"><a href="#特征提取SIFT" class="headerlink" title="特征提取SIFT"></a>特征提取SIFT</h1><h2 id="尺度空间"><a href="#尺度空间" class="headerlink" title="尺度空间"></a>尺度空间</h2><p>尺度空间是指同一张图像不同尺度下构成的集合，通常使用高斯模糊来实现</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210154852643.png"
                      class="" title="image-20230210154852643"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210154859449.png"
                      class="" title="image-20230210154859449"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210154938709.png"
                      class="" title="image-20230210154938709"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210155157542.png"
                      class="" title="image-20230210155157542"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210155012796.png"
                      class="" title="image-20230210155012796"
                >

<h2 id="DoG空间极值检测"><a href="#DoG空间极值检测" class="headerlink" title="DoG空间极值检测"></a>DoG空间极值检测</h2><p>为了寻找尺度空间的极值点，每个像素点要和其图像域(同一尺度空间)和尺度域（相邻的尺度空间)的所有相邻点进行比较，当其大于(或者小于)所有相邻点时，该点就是极值点。如下图所示，中间的检测点要和其所在图像的3×3邻域8个像素点，以及其相邻的上下两层的3×3领域18个像素点，共26个像素点进行比较。</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210160559620.png"
                      class="" title="image-20230210160559620"
                >

<h2 id="关键点的精确定位"><a href="#关键点的精确定位" class="headerlink" title="关键点的精确定位"></a>关键点的精确定位</h2><p><strong>根据确认的离散的极值点，进行曲线拟合，确认真正的极值点</strong></p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210160833303.png"
                      class="" title="image-20230210160833303"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210160847942.png"
                      class="" title="image-20230210160847942"
                >

<h2 id="消除边界响应"><a href="#消除边界响应" class="headerlink" title="消除边界响应"></a>消除边界响应</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210161938450.png"
                      class="" title="image-20230210161938450"
                >

<h2 id="特征点矢量化"><a href="#特征点矢量化" class="headerlink" title="特征点矢量化"></a>特征点矢量化</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210162121033.png"
                      class="" title="image-20230210162121033"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210162156075.png"
                      class="" title="image-20230210162156075"
                >



<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210163141334.png"
                      class="" title="image-20230210163141334"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210163308506.png"
                      class="" title="image-20230210163308506"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210163322856-16760180030965.png"
                      class="" title="image-20230210163322856"
                >

<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&quot;../pic/house.png&quot;</span>)</span><br><span class="line">gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)</span><br><span class="line"></span><br><span class="line"><span class="comment">#实例化sift对象</span></span><br><span class="line">sift = cv2.xfeatures2d.SIFT_create()</span><br><span class="line"><span class="comment">#得到特征点</span></span><br><span class="line">kp = sift.detect(gray,<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">print</span>(kp)</span><br><span class="line"></span><br><span class="line">img = cv2.drawKeypoints(gray,kp,img)    <span class="comment">#img是输出图</span></span><br><span class="line">cv_show(<span class="string">&quot;img&quot;</span>,img)</span><br><span class="line"></span><br><span class="line"><span class="comment">#计算特征向量</span></span><br><span class="line">kp,des = sift.compute(gray,kp)</span><br><span class="line"><span class="built_in">print</span>(numpy.array(kp).shape)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210165037521-16760190378296.png"
                      class="" title="image-20230210165037521"
                >

<h1 id="特征匹配"><a href="#特征匹配" class="headerlink" title="特征匹配"></a>特征匹配</h1><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cv_show</span>(<span class="params">name,img</span>):</span><br><span class="line">    cv2.imshow(name,img)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line"></span><br><span class="line">img1 = cv2.imread(<span class="string">&quot;../pic/box.png&quot;</span>,<span class="number">0</span>)</span><br><span class="line">img2 = cv2.imread(<span class="string">&quot;../pic/box_in_scene.png&quot;</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#实例化sift对象</span></span><br><span class="line">sift = cv2.xfeatures2d.SIFT_create()</span><br><span class="line"><span class="comment">#将特征点寻找和特征点矢量化结合在一起运行</span></span><br><span class="line">kp1,des1 = sift.detectAndCompute(img1,<span class="literal">None</span>)</span><br><span class="line">kp2,des2 = sift.detectAndCompute(img2,<span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#实例化特征匹配对象                             #NORM_L2：归一化数组；也可用其他特征计算方法的，但要匹配计算方式</span></span><br><span class="line">bf = cv2.BFMatcher(crossCheck=<span class="literal">True</span>)         <span class="comment">#crossCheck表示两个特征点相互匹配，A图中的i点到B中的j点是最近的，同时B中的j点到A图中的i点也是最近的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1对1的匹配</span></span><br><span class="line">matches = bf.<span class="keyword">match</span>(des1,des2)       <span class="comment">#des2是待匹配的图像</span></span><br><span class="line">matches = <span class="built_in">sorted</span>(matches,key=<span class="keyword">lambda</span> x:x.distance)       <span class="comment">#将匹配到的特征点排序</span></span><br><span class="line"><span class="comment">#画了10个特征点对应</span></span><br><span class="line">img3 = cv2.drawMatches(img1,kp1,img2,kp2,matches[:<span class="number">10</span>],<span class="literal">None</span>,flags=<span class="number">2</span>)     <span class="comment">#flag设置绘制方式</span></span><br><span class="line">cv_show(<span class="string">&quot;img3&quot;</span>,img3)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210185152441.png"
                      class="" title="image-20230210185152441"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210185156559.png"
                      class="" title="image-20230210185156559"
                >

<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#K对最佳匹配</span></span><br><span class="line">bf1 = cv2.BFMatcher()</span><br><span class="line"><span class="comment"># bf1 = cv2.FlannBasedMatcher()                   #更快速</span></span><br><span class="line">matches = bf1.knnMatch(des1,des2,k=<span class="number">2</span>)            <span class="comment">#一个点找k个对应点</span></span><br><span class="line">good = []</span><br><span class="line"><span class="keyword">for</span> m,n <span class="keyword">in</span> matches:                             <span class="comment">#设置参数，过滤部分匹配结果</span></span><br><span class="line">    <span class="keyword">if</span> m.distance &lt; <span class="number">0.75</span> * n.distance:</span><br><span class="line">        good.append([m])</span><br><span class="line"></span><br><span class="line">img3 = cv2.drawMatchesKnn(img1,kp1,img2,kp2,good,<span class="literal">None</span>,flags=<span class="number">2</span>)</span><br><span class="line">cv_show(<span class="string">&quot;img3&quot;</span>,img3)</span><br></pre></td></tr></table></figure></div>

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210190327535-16760270077707.png"
                      class="" title="image-20230210190327535"
                >

<h2 id="随机抽样一致算法RANSAC"><a href="#随机抽样一致算法RANSAC" class="headerlink" title="随机抽样一致算法RANSAC"></a>随机抽样一致算法RANSAC</h2><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210191647018.png"
                      class="" title="image-20230210191647018"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210191653915.png"
                      class="" title="image-20230210191653915"
                >

<p>在样本点随机取两个点，将两点连线，给定<code>临近范围</code>，计算在临近范围的点数。不断循环此操作，选择临近范围点数最多的两个点</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210191718583.png"
                      class="" title="image-20230210191718583"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210191725841.png"
                      class="" title="image-20230210191725841"
                >

<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/02/06/opencv/image-20230210192427254.png"
                      class="" title="image-20230210192427254"
                >


            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> opencv</li>
        <li><strong>作者:</strong> Airex Yu</li>
        <li><strong>创建于:</strong> 2023-02-06 10:35:26</li>
        
            <li>
                <strong>更新于:</strong> 2023-05-25 21:10:19
            </li>
        
        <li>
            <strong>链接:</strong> http://example.com/2023/02/06/opencv/
        </li>
        <li>
            <strong>版权声明:</strong> 本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> 进行许可。
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/opencv/">#opencv</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">#图像处理</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/%E6%A2%AF%E5%BA%A6/">#梯度</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/">#边缘检测</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96/">#特征提取</a>&nbsp;
                        </li>
                    
                        <li class="tag-item">
                            <a href="/tags/%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D/">#特征匹配</a>&nbsp;
                        </li>
                    
                </ul>
            

            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                            rel="prev"
                            href="/2023/02/20/TensorRT/"
                            >
                                <span class="left arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-left"></i>
                                </span>
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">TensorRT</span>
                                    <span class="post-nav-item">上一篇</span>
                                </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/02/02/PyTorch/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">PyTorch</span>
                                    <span class="post-nav-item">下一篇</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;评论
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-pjax>
        import { init } from 'https://evan.beee.top/js/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://example.example.com',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此页目录</div>
        <div class="page-title">opencv</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#opencv%E9%85%8D%E7%BD%AE"><span class="nav-text">opencv配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-text">图像基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96-%E5%9B%BE%E5%83%8F"><span class="nav-text">数据读取-图像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96-%E8%A7%86%E9%A2%91"><span class="nav-text">数据读取-视频</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BE%B9%E7%95%8C%E5%A1%AB%E5%85%85"><span class="nav-text">边界填充</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E8%AE%A1%E7%AE%97"><span class="nav-text">数值计算</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E8%9E%8D%E5%90%88"><span class="nav-text">图像融合</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%85%90%E8%9A%80%E4%B8%8E%E8%86%A8%E8%83%80%E6%93%8D%E4%BD%9C"><span class="nav-text">腐蚀与膨胀操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%85%90%E8%9A%80%E6%93%8D%E4%BD%9C"><span class="nav-text">腐蚀操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%86%A8%E8%83%80%E6%93%8D%E4%BD%9C"><span class="nav-text">膨胀操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E8%BF%90%E7%AE%97%E4%B8%8E%E9%97%AD%E8%BF%90%E7%AE%97"><span class="nav-text">开运算与闭运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A2%AF%E5%BA%A6%E8%BF%90%E7%AE%97"><span class="nav-text">梯度运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A4%BC%E5%B8%BD%E5%92%8C%E9%BB%91%E5%B8%BD"><span class="nav-text">礼帽和黑帽</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A2%AF%E5%BA%A6%E8%AE%A1%E7%AE%97"><span class="nav-text">梯度计算</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Sobel%E7%AE%97%E5%AD%90"><span class="nav-text">Sobel算子</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A2%AF%E5%BA%A6%E8%AE%A1%E7%AE%97%E5%AE%9E%E4%BE%8B"><span class="nav-text">梯度计算实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E7%AE%97%E5%AD%90"><span class="nav-text">其他算子</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E5%B9%B3%E6%BB%91%E5%A4%84%E7%90%86"><span class="nav-text">图像平滑处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%98%88%E5%80%BC%E5%A4%84%E7%90%86"><span class="nav-text">阈值处理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Canny%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B"><span class="nav-text">Canny边缘检测</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%9E%E6%9E%81%E5%A4%A7%E5%80%BC%E6%8A%91%E5%88%B6"><span class="nav-text">非极大值抑制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8C%E9%98%88%E5%80%BC%E6%A3%80%E6%B5%8B"><span class="nav-text">双阈值检测</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AE%E5%BB%93%E6%A3%80%E6%B5%8B"><span class="nav-text">轮廓检测</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BD%AE%E5%BB%93%E8%BF%91%E4%BC%BC"><span class="nav-text">轮廓近似</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%96%E7%95%8C%E5%9B%BE%E5%BD%A2"><span class="nav-text">外界图形</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E5%8C%B9%E9%85%8D"><span class="nav-text">模板匹配</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8C%B9%E9%85%8D%E5%A4%9A%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="nav-text">匹配多个对象</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F%E9%87%91%E5%AD%97%E5%A1%94"><span class="nav-text">图像金字塔</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94"><span class="nav-text">高斯金字塔</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E9%87%91%E5%AD%97%E5%A1%94"><span class="nav-text">拉普拉斯金字塔</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%96%87%E6%A1%A3%E6%89%AB%E6%8F%8FOCR%E8%AF%86%E5%88%AB"><span class="nav-text">示例：文档扫描OCR识别</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%B4%E6%96%B9%E5%9B%BE"><span class="nav-text">直方图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#mask%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">mask的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9D%87%E8%A1%A1%E5%8C%96"><span class="nav-text">均衡化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E9%80%82%E5%BA%94%E5%9D%87%E8%A1%A1%E5%8C%96"><span class="nav-text">自适应均衡化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2"><span class="nav-text">傅里叶变换</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BB%A4%E6%B3%A2"><span class="nav-text">滤波</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#harris%E8%A7%92%E7%82%B9%E6%A3%80%E6%B5%8B"><span class="nav-text">harris角点检测</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96SIFT"><span class="nav-text">特征提取SIFT</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%BA%E5%BA%A6%E7%A9%BA%E9%97%B4"><span class="nav-text">尺度空间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DoG%E7%A9%BA%E9%97%B4%E6%9E%81%E5%80%BC%E6%A3%80%E6%B5%8B"><span class="nav-text">DoG空间极值检测</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E7%82%B9%E7%9A%84%E7%B2%BE%E7%A1%AE%E5%AE%9A%E4%BD%8D"><span class="nav-text">关键点的精确定位</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B6%88%E9%99%A4%E8%BE%B9%E7%95%8C%E5%93%8D%E5%BA%94"><span class="nav-text">消除边界响应</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E5%BE%81%E7%82%B9%E7%9F%A2%E9%87%8F%E5%8C%96"><span class="nav-text">特征点矢量化</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D"><span class="nav-text">特征匹配</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E6%8A%BD%E6%A0%B7%E4%B8%80%E8%87%B4%E7%AE%97%E6%B3%95RANSAC"><span class="nav-text">随机抽样一致算法RANSAC</span></a></li></ol></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2023</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Airex Yu</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span>
                <br>
            <span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.5</a>
        </div>
        
        
        
            <div id="start_div" style="display:none">
                2023/01/05 11:45:14
            </div>
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/navbarShrink.js"></script>

<script src="/js/tools/scrollTopBottom.js"></script>

<script src="/js/tools/lightDarkSwitch.js"></script>



    
<script src="/js/tools/localSearch.js"></script>




    
<script src="/js/tools/codeBlock.js"></script>




    
<script src="/js/layouts/lazyload.js"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js"></script>




    
<script src="/js/libs/mermaid.min.js"></script>

    
<script src="/js/plugins/mermaid.js"></script>





<div class="post-scripts pjax">
    
        
<script src="/js/tools/tocToggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>

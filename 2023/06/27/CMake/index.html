<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="Airex Yu">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://example.com/2023/06/27/cmake/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="CMakeå·¥å…·Makeæ˜¯ä¸€ç§æ„å»ºå·¥å…·ï¼Œå®ƒç”¨äºè‡ªåŠ¨åŒ–æ„å»ºå’Œç®¡ç†è½¯ä»¶é¡¹ç›®çš„ç¼–è¯‘è¿‡ç¨‹ã€‚Makeå·¥å…·é€šè¿‡è¯»å–Makefileæ–‡ä»¶ä¸­çš„è§„åˆ™å’Œä¾èµ–å…³ç³»æ¥ç¡®å®šå“ªäº›æºæ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œç„¶åè°ƒç”¨é€‚å½“çš„ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€åº“æ–‡ä»¶æˆ–å…¶ä»–ç”Ÿæˆç‰©ã€‚  GNU Make  ï¼ŒQT çš„ qmake  ï¼Œå¾®è½¯çš„ MS nmake ï¼ŒBSD Makeï¼ˆpmake ï¼‰ï¼ŒMakepp ï¼Œç­‰ç­‰ã€‚è¿™äº› Make å·¥å…·éµå¾ªç€ä¸åŒ">
<meta property="og:type" content="article">
<meta property="og:title" content="CMake">
<meta property="og:url" content="http://example.com/2023/06/27/CMake/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="CMakeå·¥å…·Makeæ˜¯ä¸€ç§æ„å»ºå·¥å…·ï¼Œå®ƒç”¨äºè‡ªåŠ¨åŒ–æ„å»ºå’Œç®¡ç†è½¯ä»¶é¡¹ç›®çš„ç¼–è¯‘è¿‡ç¨‹ã€‚Makeå·¥å…·é€šè¿‡è¯»å–Makefileæ–‡ä»¶ä¸­çš„è§„åˆ™å’Œä¾èµ–å…³ç³»æ¥ç¡®å®šå“ªäº›æºæ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œç„¶åè°ƒç”¨é€‚å½“çš„ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€åº“æ–‡ä»¶æˆ–å…¶ä»–ç”Ÿæˆç‰©ã€‚  GNU Make  ï¼ŒQT çš„ qmake  ï¼Œå¾®è½¯çš„ MS nmake ï¼ŒBSD Makeï¼ˆpmake ï¼‰ï¼ŒMakepp ï¼Œç­‰ç­‰ã€‚è¿™äº› Make å·¥å…·éµå¾ªç€ä¸åŒ">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2023/06/27/CMake/image-20230518135248836.png">
<meta property="article:published_time" content="2023-06-27T12:58:49.000Z">
<meta property="article:modified_time" content="2023-06-27T12:59:16.459Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Cmake">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2023/06/27/CMake/image-20230518135248836.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/%E9%B1%BC.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/%E9%B1%BC.svg">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/%E9%B1%BC.svg">
    <!--- Page Info-->
    
    <title>
        
            CMake -
        
        Airex-Daily
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/assets/fonts.css">

    <!--- Font Part-->
    
    
    
        <link href="" rel="stylesheet">
    
    
        <link href="" rel="stylesheet">
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"æ¨èé˜…è¯»","limit":3,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":true,"family":null,"url":null},"english":{"enable":true,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fix","image":{"light":"/images/wallhaven-wqery6-light.webp","dark":"/images/wallhaven-rry6gw.png"},"title":"ä¼¸æ‰‹ä¹Ÿæ¡ä¸ä½å½©è™¹ğŸŒˆ","subtitle":{"text":["â€”â€”æˆ‘æœŸå¾…"],"hitokoto":{"enable":true,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://github.com/Airex-ai","instagram":null,"zhihu":null,"twitter":null,"email":"airex.yu@foxmail.com"}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":"https://music.163.com/song?id=1501530173&userid=253099352","cover":null}]},"mermaid":{"enable":true,"version":"9.3.0"}},"version":"2.1.5","navbar":{"auto_hide":true,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"About":{"icon":"fa-regular fa-user","submenus":{"Github":"https://github.com/Airex-ai?tab=repositories"}},"éšè®°":{"icon":"fa-solid fa-tree-palm","path":"/masonry/"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}}};
    Global.language_ago = {"second":"%s ç§’å‰","minute":"%s åˆ†é’Ÿå‰","hour":"%s å°æ—¶å‰","day":"%s å¤©å‰","week":"%s å‘¨å‰","month":"%s ä¸ªæœˆå‰","year":"%s å¹´å‰"};
    Global.data_config = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Airex-Daily
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        é¦–é¡µ
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        å½’æ¡£
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        å…³äº&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/Airex-ai?tab=repositories">GITHUB
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/masonry/"  >
                                    
                                        
                                            <i class="fa-solid fa-tree-palm"></i>
                                        
                                        éšè®°
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                é¦–é¡µ
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                å½’æ¡£
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                å…³äº&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/Airex-ai?tab=repositories">GITHUB</a>
                            </li>
                        
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/masonry/"  >
                             
                                
                                    <i class="fa-solid fa-tree-palm"></i>
                                
                                éšè®°
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular">CMake</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/%E5%A4%B4%E5%83%8F.JPG">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">Airex Yu</span>
                            
                                <span class="author-label">Lv3</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-06-27 20:58:49</span>
        <span class="mobile">2023-06-27 20:58</span>
        <span class="hover-info">åˆ›å»º</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-06-27 20:59:16</span>
            <span class="mobile">2023-06-27 20:59</span>
            <span class="hover-info">æ›´æ–°</span>
        </span>
    

    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Cmake/">Cmake</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h5 id="CMakeå·¥å…·"><a href="#CMakeå·¥å…·" class="headerlink" title="CMakeå·¥å…·"></a>CMakeå·¥å…·</h5><p>Makeæ˜¯ä¸€ç§æ„å»ºå·¥å…·ï¼Œ<strong>å®ƒç”¨äºè‡ªåŠ¨åŒ–æ„å»ºå’Œç®¡ç†è½¯ä»¶é¡¹ç›®çš„ç¼–è¯‘è¿‡ç¨‹</strong>ã€‚Makeå·¥å…·é€šè¿‡è¯»å–Makefileæ–‡ä»¶ä¸­çš„è§„åˆ™å’Œä¾èµ–å…³ç³»æ¥ç¡®å®šå“ªäº›æºæ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œç„¶åè°ƒç”¨é€‚å½“çš„ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€åº“æ–‡ä»¶æˆ–å…¶ä»–ç”Ÿæˆç‰©ã€‚</p>
<p> <a class="link"   target="_blank" rel="noopener" href="https://www.hahack.com/wiki/tools-makefile.html" >GNU Make <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> ï¼ŒQT çš„ <a class="link"   target="_blank" rel="noopener" href="http://qt-project.org/doc/qt-4.8/qmake-manual.html" >qmake <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> ï¼Œå¾®è½¯çš„ <a class="link"   target="_blank" rel="noopener" href="http://msdn.microsoft.com/en-us/library/ms930369.aspx" >MS nmake <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ï¼ŒBSD Makeï¼ˆ<a class="link"   target="_blank" rel="noopener" href="http://www.freebsd.org/doc/en/books/pmake/" >pmake <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ï¼‰ï¼Œ<a class="link"   target="_blank" rel="noopener" href="http://makepp.sourceforge.net/" >Makepp <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ï¼Œç­‰ç­‰ã€‚è¿™äº› Make å·¥å…·éµå¾ªç€ä¸åŒçš„è§„èŒƒå’Œæ ‡å‡†ï¼Œæ‰€æ‰§è¡Œçš„ Makefile æ ¼å¼ä¹Ÿåƒå·®ä¸‡åˆ«ã€‚è¿™æ ·å°±å¸¦æ¥äº†ä¸€ä¸ªä¸¥å³»çš„é—®é¢˜ï¼šå¦‚æœè½¯ä»¶æƒ³è·¨å¹³å°ï¼Œå¿…é¡»è¦ä¿è¯èƒ½å¤Ÿåœ¨ä¸åŒå¹³å°ç¼–è¯‘ã€‚è€Œå¦‚æœä½¿ç”¨ä¸Šé¢çš„ Make å·¥å…·ï¼Œå°±å¾—ä¸ºæ¯ä¸€ç§æ ‡å‡†å†™ä¸€æ¬¡ Makefile ï¼Œè¿™å°†æ˜¯ä¸€ä»¶è®©äººæŠ“ç‹‚çš„å·¥ä½œã€‚</p>
<p>CMake å°±æ˜¯é’ˆå¯¹ä¸Šé¢é—®é¢˜æ‰€è®¾è®¡çš„å·¥å…·ï¼š<strong>å®ƒé¦–å…ˆå…è®¸å¼€å‘è€…ç¼–å†™ä¸€ç§å¹³å°æ— å…³çš„ CMakeList.txt æ–‡ä»¶æ¥å®šåˆ¶æ•´ä¸ªç¼–è¯‘æµç¨‹ï¼Œç„¶åå†æ ¹æ®ç›®æ ‡ç”¨æˆ·çš„å¹³å°è¿›ä¸€æ­¥ç”Ÿæˆæ‰€éœ€çš„æœ¬åœ°åŒ– Makefile å’Œå·¥ç¨‹æ–‡ä»¶</strong>ï¼Œå¦‚ Unix çš„ Makefile æˆ– Windows çš„ Visual Studio å·¥ç¨‹ã€‚ä»è€Œåšåˆ°â€œWrite once, run everywhereâ€ã€‚æ˜¾ç„¶ï¼ŒCMake æ˜¯ä¸€ä¸ªæ¯”ä¸Šè¿°å‡ ç§ make æ›´é«˜çº§çš„ç¼–è¯‘é…ç½®å·¥å…·ã€‚ä¸€äº›ä½¿ç”¨ CMake ä½œä¸ºé¡¹ç›®æ¶æ„ç³»ç»Ÿçš„çŸ¥åå¼€æºé¡¹ç›®æœ‰ <a class="link"   target="_blank" rel="noopener" href="http://www.vtk.org/" >VTK <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ã€<a class="link"   target="_blank" rel="noopener" href="http://www.itk.org/" >ITK <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ã€<a class="link"   target="_blank" rel="noopener" href="http://kde.org/" >KDE <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ã€<a class="link"   target="_blank" rel="noopener" href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/modules/core/doc/intro.html" >OpenCV <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ã€<a class="link"   target="_blank" rel="noopener" href="http://www.openscenegraph.org/" >OSG <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> ç­‰ [<a class="link"   target="_blank" rel="noopener" href="https://www.hahack.com/codes/cmake/#fn1" >1] <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>ã€‚</p>
<p>åœ¨ linux å¹³å°ä¸‹ä½¿ç”¨ CMake ç”Ÿæˆ Makefile å¹¶ç¼–è¯‘çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç¼–å†™ CMake é…ç½®æ–‡ä»¶ CMakeLists.txt ã€‚</li>
<li>æ‰§è¡Œå‘½ä»¤ <code>cmake PATH</code> æˆ–è€… <code>ccmake PATH</code> ç”Ÿæˆ Makefileï¼ˆ<code>ccmake</code> å’Œ <code>cmake</code> çš„åŒºåˆ«åœ¨äºå‰è€…æä¾›äº†ä¸€ä¸ªäº¤äº’å¼çš„ç•Œé¢ï¼‰ã€‚å…¶ä¸­ï¼Œ <code>PATH</code> æ˜¯ CMakeLists.txt æ‰€åœ¨çš„ç›®å½•ã€‚</li>
<li>ä½¿ç”¨ <code>make</code> å‘½ä»¤è¿›è¡Œç¼–è¯‘ã€‚</li>
</ol>
<p>æœ¬æ–‡å°†ä»å®ä¾‹å…¥æ‰‹ï¼Œä¸€æ­¥æ­¥è®²è§£ CMake çš„å¸¸è§ç”¨æ³•ï¼Œæ–‡ä¸­æ‰€æœ‰çš„å®ä¾‹ä»£ç å¯ä»¥åœ¨<a class="link"   target="_blank" rel="noopener" href="https://github.com/wzpan/cmake-demo" >è¿™é‡Œ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>æ‰¾åˆ°ã€‚å¦‚æœä½ è¯»å®Œä»è§‰å¾—æ„çŠ¹æœªå°½ï¼Œå¯ä»¥ç»§ç»­å­¦ä¹ æˆ‘åœ¨æ–‡ç« æœ«å°¾æä¾›çš„å…¶ä»–èµ„æºã€‚</p>
<h6 id="å…¥é—¨æ¡ˆä¾‹ï¼šå•ä¸ªæºæ–‡ä»¶"><a href="#å…¥é—¨æ¡ˆä¾‹ï¼šå•ä¸ªæºæ–‡ä»¶" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹ï¼šå•ä¸ªæºæ–‡ä»¶"></a>å…¥é—¨æ¡ˆä¾‹ï¼šå•ä¸ªæºæ–‡ä»¶</h6><p>å¯¹äºç®€å•çš„é¡¹ç›®ï¼Œåªéœ€è¦å†™å‡ è¡Œä»£ç å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ç°åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­åªæœ‰ä¸€ä¸ªæºæ–‡ä»¶ <a class="link"   target="_blank" rel="noopener" href="http://main.cc/" >main.cc <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> ï¼Œè¯¥ç¨‹åºçš„ç”¨é€”æ˜¯è®¡ç®—ä¸€ä¸ªæ•°çš„æŒ‡æ•°å¹‚ã€‚</p>
<div class="highlight-container" data-rel="C++"><figure class="iseeu highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * power - Calculate the power of number.</span></span><br><span class="line"><span class="comment"> * @param base: Base value.</span></span><br><span class="line"><span class="comment"> * @param exponent: Exponent value.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return base raised to the power exponent.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">power</span><span class="params">(<span class="type">double</span> base, <span class="type">int</span> exponent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> result = base;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (exponent == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; exponent; ++i)&#123;</span><br><span class="line">        result = result * base;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc &lt; <span class="number">3</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Usage: %s base exponent \n&quot;</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span> base = <span class="built_in">atof</span>(argv[<span class="number">1</span>]);</span><br><span class="line">    <span class="type">int</span> exponent = <span class="built_in">atoi</span>(argv[<span class="number">2</span>]);</span><br><span class="line">    <span class="type">double</span> result = <span class="built_in">power</span>(base, exponent);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%g ^ %d is %g\n&quot;</span>, base, exponent, result);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>ç¼–å†™ CMakeLists.txt</p>
</blockquote>
<p>é¦–å…ˆç¼–å†™ CMakeLists.txt æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åœ¨ä¸ <a class="link"   target="_blank" rel="noopener" href="http://main.cc/" >main.cc <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æºæ–‡ä»¶åŒä¸ªç›®å½•ä¸‹ï¼š</p>
<p>CMakeLists.txt çš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œç”±å‘½ä»¤ã€æ³¨é‡Šå’Œç©ºæ ¼ç»„æˆï¼Œå…¶ä¸­å‘½ä»¤æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚ç¬¦å· <code>#</code> åé¢çš„å†…å®¹è¢«è®¤ä¸ºæ˜¯æ³¨é‡Šã€‚å‘½ä»¤ç”±å‘½ä»¤åç§°ã€å°æ‹¬å·å’Œå‚æ•°ç»„æˆï¼Œå‚æ•°ä¹‹é—´ä½¿ç”¨ç©ºæ ¼è¿›è¡Œé—´éš”ã€‚</p>
<p>å¯¹äºä¸Šé¢çš„ CMakeLists.txt æ–‡ä»¶ï¼Œä¾æ¬¡å‡ºç°äº†å‡ ä¸ªå‘½ä»¤ï¼š</p>
<ol>
<li><code>cmake_minimum_required</code>ï¼šæŒ‡å®šè¿è¡Œæ­¤é…ç½®æ–‡ä»¶æ‰€éœ€çš„ CMake çš„æœ€ä½ç‰ˆæœ¬ï¼›</li>
<li><code>project</code>ï¼šå‚æ•°å€¼æ˜¯ <code>Demo1</code>ï¼Œè¯¥å‘½ä»¤è¡¨ç¤ºé¡¹ç›®çš„åç§°æ˜¯ <code>Demo1</code> ã€‚</li>
<li><code>add_executable</code>ï¼š <strong>å°†åä¸º <a class="link"   target="_blank" rel="noopener" href="http://main.cc/" >main.cc <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> çš„æºæ–‡ä»¶ç¼–è¯‘æˆä¸€ä¸ªåç§°ä¸º Demo çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</strong></li>
</ol>
<blockquote>
<p>ç¼–è¯‘é¡¹ç›®</p>
</blockquote>
<p>ä¹‹åï¼Œåœ¨å½“å‰ç›®å½•æ‰§è¡Œ <code>cmake .</code> ï¼Œå¾—åˆ° Makefile åå†ä½¿ç”¨ <code>make</code> å‘½ä»¤ç¼–è¯‘å¾—åˆ° Demo1 å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo1]$ cmake .</span><br><span class="line">-- The C compiler identification is GNU 4.8.2</span><br><span class="line">-- The CXX compiler identification is GNU 4.8.2</span><br><span class="line">-- Check for working C compiler: /usr/sbin/cc</span><br><span class="line">-- Check for working C compiler: /usr/sbin/cc -- works</span><br><span class="line">-- Detecting C compiler ABI info</span><br><span class="line">-- Detecting C compiler ABI info - done</span><br><span class="line">-- Check for working CXX compiler: /usr/sbin/c++</span><br><span class="line">-- Check for working CXX compiler: /usr/sbin/c++ -- works</span><br><span class="line">-- Detecting CXX compiler ABI info</span><br><span class="line">-- Detecting CXX compiler ABI info - done</span><br><span class="line">-- Configuring done</span><br><span class="line">-- Generating done</span><br><span class="line">-- Build files have been written to: /home/ehome/Documents/programming/C/power/Demo1</span><br><span class="line">[ehome@xman Demo1]$ make</span><br><span class="line">Scanning dependencies of target Demo</span><br><span class="line">[100%] Building C object CMakeFiles/Demo.dir/main.cc.o</span><br><span class="line">Linking C executable Demo</span><br><span class="line">[100%] Built target Demo</span><br><span class="line">[ehome@xman Demo1]$ ./Demo 5 4</span><br><span class="line">5 ^ 4 is 625</span><br><span class="line">[ehome@xman Demo1]$ ./Demo 7 3</span><br><span class="line">7 ^ 3 is 343</span><br><span class="line">[ehome@xman Demo1]$ ./Demo 2 10</span><br><span class="line">2 ^ 10 is 1024</span><br></pre></td></tr></table></figure></div>

<h6 id="å¤šä¸ªæºæ–‡ä»¶"><a href="#å¤šä¸ªæºæ–‡ä»¶" class="headerlink" title="å¤šä¸ªæºæ–‡ä»¶"></a>å¤šä¸ªæºæ–‡ä»¶</h6><blockquote>
<p>åŒä¸€ç›®å½•ï¼Œå¤šä¸ªæºæ–‡ä»¶</p>
</blockquote>
<p>ä¸Šé¢çš„ä¾‹å­åªæœ‰å•ä¸ªæºæ–‡ä»¶ã€‚ç°åœ¨å‡å¦‚æŠŠ <code>power</code> å‡½æ•°å•ç‹¬å†™è¿›ä¸€ä¸ªåä¸º <code>MathFunctions.c</code> çš„æºæ–‡ä»¶é‡Œï¼Œä½¿å¾—è¿™ä¸ªå·¥ç¨‹å˜æˆå¦‚ä¸‹çš„å½¢å¼ï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./Demo2</span><br><span class="line">    |</span><br><span class="line">    +--- main.cc</span><br><span class="line">    |</span><br><span class="line">    +--- MathFunctions.cc</span><br><span class="line">    |</span><br><span class="line">    +--- MathFunctions.h</span><br></pre></td></tr></table></figure></div>

<p>è¿™ä¸ªæ—¶å€™ï¼ŒCMakeLists.txt å¯ä»¥æ”¹æˆå¦‚ä¸‹çš„å½¢å¼ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMake æœ€ä½ç‰ˆæœ¬å·è¦æ±‚</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span> (VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¡¹ç›®ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">project</span> (Demo2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šç”Ÿæˆç›®æ ‡</span></span><br><span class="line"><span class="keyword">add_executable</span>(Demo main.cc MathFunctions.cc)</span><br></pre></td></tr></table></figure></div>

<p>å”¯ä¸€çš„æ”¹åŠ¨åªæ˜¯åœ¨ <code>add_executable</code> å‘½ä»¤ä¸­å¢åŠ äº†ä¸€ä¸ª <code>MathFunctions.cc</code> æºæ–‡ä»¶ã€‚è¿™æ ·å†™å½“ç„¶æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæºæ–‡ä»¶å¾ˆå¤šï¼ŒæŠŠæ‰€æœ‰æºæ–‡ä»¶çš„åå­—éƒ½åŠ è¿›å»å°†æ˜¯ä¸€ä»¶çƒ¦äººçš„å·¥ä½œã€‚æ›´çœäº‹çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>aux_source_directory</code> å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šæŸ¥æ‰¾æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶ï¼Œç„¶åå°†ç»“æœå­˜è¿›æŒ‡å®šå˜é‡åã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aux_source_directory(&lt;dir&gt; &lt;variable&gt;)</span><br></pre></td></tr></table></figure></div>

<p>å› æ­¤ï¼Œå¯ä»¥ä¿®æ”¹ CMakeLists.txt å¦‚ä¸‹ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMake æœ€ä½ç‰ˆæœ¬å·è¦æ±‚</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span> (VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¡¹ç›®ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">project</span> (Demo2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># å¹¶å°†åç§°ä¿å­˜åˆ° DIR_SRCS å˜é‡</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. DIR_SRCS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šç”Ÿæˆç›®æ ‡</span></span><br><span class="line"><span class="keyword">add_executable</span>(Demo <span class="variable">$&#123;DIR_SRCS&#125;</span>)</span><br></pre></td></tr></table></figure></div>

<p><strong>è¿™æ ·ï¼ŒCMake ä¼šå°†å½“å‰ç›®å½•æ‰€æœ‰æºæ–‡ä»¶çš„æ–‡ä»¶åèµ‹å€¼ç»™å˜é‡ <code>DIR_SRCS</code> ï¼Œå†æŒ‡ç¤ºå˜é‡ <code>DIR_SRCS</code> ä¸­çš„æºæ–‡ä»¶éœ€è¦ç¼–è¯‘æˆä¸€ä¸ªåç§°ä¸º Demo çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</strong></p>
<blockquote>
<p>å¤šä¸ªç›®å½•ï¼Œå¤šä¸ªæºæ–‡ä»¶</p>
</blockquote>
<p>ç°åœ¨è¿›ä¸€æ­¥å°† MathFunctions.h å’Œ <a class="link"   target="_blank" rel="noopener" href="http://mathfunctions.cc/" >MathFunctions.cc <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ–‡ä»¶ç§»åŠ¨åˆ° math ç›®å½•ä¸‹ã€‚</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./Demo3</span><br><span class="line">    |</span><br><span class="line">    +--- main.cc</span><br><span class="line">    |</span><br><span class="line">    +--- math/</span><br><span class="line">          |</span><br><span class="line">          +--- MathFunctions.cc</span><br><span class="line">          |</span><br><span class="line">          +--- MathFunctions.h</span><br></pre></td></tr></table></figure></div>

<p>å¯¹äºè¿™ç§æƒ…å†µï¼Œéœ€è¦åˆ†åˆ«åœ¨é¡¹ç›®æ ¹ç›®å½• Demo3 å’Œ math ç›®å½•é‡Œå„ç¼–å†™ä¸€ä¸ª CMakeLists.txt æ–‡ä»¶ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°† math ç›®å½•é‡Œçš„æ–‡ä»¶ç¼–è¯‘æˆ<strong>é™æ€åº“</strong>å†ç”± main å‡½æ•°è°ƒç”¨ã€‚</p>
<blockquote>
<p><strong>é™æ€é“¾æ¥åº“ï¼ˆStatic Linking Libraryï¼‰æ˜¯ä¸€ç§åœ¨ç¼–è¯‘æ—¶å°†åº“æ–‡ä»¶çš„ä»£ç å’Œç¨‹åºä»£ç åˆå¹¶æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„æ–¹å¼</strong>ã€‚åœ¨é™æ€é“¾æ¥è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šå°†ç¨‹åºæ‰€ä¾èµ–çš„é™æ€é“¾æ¥åº“çš„ç›®æ ‡ä»£ç ç›´æ¥åµŒå…¥åˆ°æœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„ã€åŒ…å«æ‰€æœ‰å¿…è¦ä»£ç çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>ä½¿ç”¨é™æ€é“¾æ¥åº“çš„ä¸»è¦ä¼˜ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li>ç‹¬ç«‹æ€§ï¼šé™æ€é“¾æ¥åº“ä½¿å¾—å¯æ‰§è¡Œæ–‡ä»¶å…·æœ‰å®Œå…¨çš„ç‹¬ç«‹æ€§ï¼Œ<strong>ä¸ä¾èµ–äºç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨ç‰¹å®šçš„åº“æ–‡ä»¶</strong>ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ç¨‹åºåœ¨å…¶ä»–ç³»ç»Ÿä¸­è¿è¡Œæ—¶ä¸ä¼šå› ä¸ºç¼ºå°‘åº“æ–‡ä»¶è€Œå‡ºé”™ã€‚</li>
<li>æ€§èƒ½ï¼šé™æ€é“¾æ¥åº“åœ¨ç¼–è¯‘æ—¶è¢«åµŒå…¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œä¸éœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œåº“æ–‡ä»¶çš„åŠ è½½å’Œé“¾æ¥ï¼Œå› æ­¤å¯ä»¥å‡å°‘ç¨‹åºçš„å¯åŠ¨æ—¶é—´ï¼Œå¹¶ä¸”åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¹Ÿå¯ä»¥æé«˜ä¸€å®šçš„æ‰§è¡Œæ•ˆç‡ã€‚</li>
<li>ç‰ˆæœ¬æ§åˆ¶ï¼šé™æ€é“¾æ¥åº“å¯ä»¥ç¡®ä¿ç¨‹åºä½¿ç”¨çš„æ˜¯æŒ‡å®šç‰ˆæœ¬çš„åº“æ–‡ä»¶ï¼Œé¿å…äº†åœ¨ä¸åŒç‰ˆæœ¬çš„åº“æ–‡ä»¶ä¹‹é—´å‡ºç°å…¼å®¹æ€§é—®é¢˜ã€‚</li>
<li>åˆ†å‘ç®€å•ï¼šä½¿ç”¨é™æ€é“¾æ¥åº“çš„ç¨‹åºå¯ä»¥æ›´æ–¹ä¾¿åœ°è¿›è¡Œåˆ†å‘ï¼Œå› ä¸ºåªéœ€è¦å°†ä¸€ä¸ªç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶äº¤ä»˜ç»™ç”¨æˆ·ï¼Œè€Œä¸éœ€è¦é¢å¤–æä¾›åº“æ–‡ä»¶ã€‚</li>
</ol>
</blockquote>
<p>æ ¹ç›®å½•ä¸­çš„ CMakeLists.txt ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMake æœ€ä½ç‰ˆæœ¬å·è¦æ±‚</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span> (VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¡¹ç›®ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">project</span> (Demo3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># å¹¶å°†åç§°ä¿å­˜åˆ° DIR_SRCS å˜é‡</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. DIR_SRCS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ  math å­ç›®å½•</span></span><br><span class="line"><span class="keyword">add_subdirectory</span>(<span class="keyword">math</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šç”Ÿæˆç›®æ ‡ </span></span><br><span class="line"><span class="keyword">add_executable</span>(Demo main.cc)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ é“¾æ¥åº“</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(Demo MathFunctions)</span><br></pre></td></tr></table></figure></div>

<p>è¯¥æ–‡ä»¶æ·»åŠ äº†ä¸‹é¢çš„å†…å®¹: ç¬¬3è¡Œï¼Œä½¿ç”¨å‘½ä»¤ <code>add_subdirectory</code> æŒ‡æ˜æœ¬é¡¹ç›®åŒ…å«ä¸€ä¸ªå­ç›®å½• mathï¼Œè¿™æ · math ç›®å½•ä¸‹çš„ CMakeLists.txt æ–‡ä»¶å’Œæºä»£ç ä¹Ÿä¼šè¢«å¤„ç† ã€‚ç¬¬6è¡Œï¼Œä½¿ç”¨å‘½ä»¤ <code>target_link_libraries</code> æŒ‡æ˜å¯æ‰§è¡Œæ–‡ä»¶ main éœ€è¦è¿æ¥ä¸€ä¸ªåä¸º MathFunctions çš„é“¾æ¥åº“ ã€‚</p>
<p>å­ç›®å½•ä¸­çš„ CMakeLists.txtï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># å¹¶å°†åç§°ä¿å­˜åˆ° DIR_LIB_SRCS å˜é‡</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. DIR_LIB_SRCS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆé“¾æ¥åº“</span></span><br><span class="line"><span class="keyword">add_library</span> (MathFunctions <span class="variable">$&#123;DIR_LIB_SRCS&#125;</span>)</span><br></pre></td></tr></table></figure></div>

<p>åœ¨è¯¥æ–‡ä»¶ä¸­ä½¿ç”¨å‘½ä»¤ <code>add_library</code> å°† src ç›®å½•ä¸­çš„æºæ–‡ä»¶ç¼–è¯‘ä¸ºé™æ€é“¾æ¥åº“ã€‚</p>
<h6 id="è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹"><a href="#è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹" class="headerlink" title="è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹"></a>è‡ªå®šä¹‰ç¼–è¯‘é€‰é¡¹</h6><p>CMake å…è®¸ä¸ºé¡¹ç›®å¢åŠ ç¼–è¯‘é€‰é¡¹ï¼Œä»è€Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„ç¯å¢ƒå’Œéœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„ç¼–è¯‘æ–¹æ¡ˆã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯ä»¥å°† MathFunctions åº“è®¾ä¸ºä¸€ä¸ªå¯é€‰çš„åº“ï¼Œå¦‚æœè¯¥é€‰é¡¹ä¸º <code>ON</code> ï¼Œå°±ä½¿ç”¨è¯¥åº“å®šä¹‰çš„æ•°å­¦å‡½æ•°æ¥è¿›è¡Œè¿ç®—ã€‚å¦åˆ™å°±è°ƒç”¨æ ‡å‡†åº“ä¸­çš„æ•°å­¦å‡½æ•°åº“ã€‚</p>
<blockquote>
<p>ä¿®æ”¹ CMakeLists æ–‡ä»¶</p>
</blockquote>
<p>æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€æ­¥æ˜¯åœ¨é¡¶å±‚çš„ CMakeLists.txt æ–‡ä»¶ä¸­æ·»åŠ è¯¥é€‰é¡¹ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CMake æœ€ä½ç‰ˆæœ¬å·è¦æ±‚</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span> (VERSION <span class="number">2.8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¡¹ç›®ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">project</span> (Demo4)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_INCLUDE_CURRENT_DIR <span class="keyword">ON</span>)				<span class="comment"># è®¾ç½® CMake åŒ…å«å½“å‰ç›®å½•ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦ä½¿ç”¨è‡ªå·±çš„ MathFunctions åº“</span></span><br><span class="line"><span class="keyword">option</span> (USE_MYMATH</span><br><span class="line">	   <span class="string">&quot;Use provided math implementation&quot;</span> <span class="keyword">ON</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å…¥ä¸€ä¸ªé…ç½®å¤´æ–‡ä»¶ï¼Œç”¨äºå¤„ç† CMake å¯¹æºç çš„è®¾ç½®</span></span><br><span class="line"><span class="keyword">configure_file</span> (</span><br><span class="line">  <span class="string">&quot;$&#123;PROJECT_SOURCE_DIR&#125;/config.h.in&quot;</span></span><br><span class="line">  <span class="string">&quot;$&#123;PROJECT_BINARY_DIR&#125;/config.h&quot;</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦åŠ å…¥ MathFunctions åº“</span></span><br><span class="line"><span class="keyword">if</span> (USE_MYMATH)</span><br><span class="line">  <span class="keyword">include_directories</span> (<span class="string">&quot;$&#123;PROJECT_SOURCE_DIR&#125;/math&quot;</span>)</span><br><span class="line">  <span class="keyword">add_subdirectory</span> (<span class="keyword">math</span>)</span><br><span class="line">  <span class="keyword">set</span> (EXTRA_LIBS <span class="variable">$&#123;EXTRA_LIBS&#125;</span> MathFunctions)		<span class="comment">#å°† MathFunctions æ·»åŠ åˆ° EXTRA_LIBS å˜é‡ä¸­ã€‚</span></span><br><span class="line"><span class="keyword">endif</span> (USE_MYMATH)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># å¹¶å°†åç§°ä¿å­˜åˆ° DIR_SRCS å˜é‡</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. DIR_SRCS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šç”Ÿæˆç›®æ ‡</span></span><br><span class="line"><span class="keyword">add_executable</span> (Demo <span class="variable">$&#123;DIR_SRCS&#125;</span>)</span><br><span class="line"><span class="keyword">target_link_libraries</span> (Demo  <span class="variable">$&#123;EXTRA_LIBS&#125;</span>)</span><br></pre></td></tr></table></figure></div>

<p>å…¶ä¸­ï¼š</p>
<ol>
<li>ç¬¬7è¡Œçš„ <code>configure_file</code> å‘½ä»¤ç”¨äºåŠ å…¥ä¸€ä¸ªé…ç½®å¤´æ–‡ä»¶ <strong>config.h ï¼Œè¿™ä¸ªæ–‡ä»¶ç”± CMake ä» <a class="link"   target="_blank" rel="noopener" href="http://config.h.in/" >config.h.in <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> ç”Ÿ</strong>æˆï¼Œé€šè¿‡è¿™æ ·çš„æœºåˆ¶ï¼Œå°†å¯ä»¥é€šè¿‡é¢„å®šä¹‰ä¸€äº›å‚æ•°å’Œå˜é‡æ¥æ§åˆ¶ä»£ç çš„ç”Ÿæˆã€‚</li>
<li>ç¬¬13è¡Œçš„ <code>option</code> å‘½ä»¤æ·»åŠ äº†ä¸€ä¸ª <code>USE_MYMATH</code> é€‰é¡¹ï¼Œå¹¶ä¸”é»˜è®¤å€¼ä¸º <code>ON</code> ã€‚</li>
<li>ç¬¬17è¡Œæ ¹æ® <code>USE_MYMATH</code> å˜é‡çš„å€¼æ¥å†³å®šæ˜¯å¦ä½¿ç”¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ MathFunctions åº“ã€‚</li>
</ol>
<blockquote>
<p>ä¿®æ”¹ <a class="link"   target="_blank" rel="noopener" href="http://main.cc/" >main.cc <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ–‡ä»¶</p>
</blockquote>
<p>ä¹‹åä¿®æ”¹ <a class="link"   target="_blank" rel="noopener" href="http://main.cc/" >main.cc <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ–‡ä»¶ï¼Œè®©å…¶æ ¹æ® <code>USE_MYMATH</code> çš„é¢„å®šä¹‰å€¼æ¥å†³å®šæ˜¯å¦è°ƒç”¨æ ‡å‡†åº“è¿˜æ˜¯ MathFunctions åº“ï¼š</p>
<div class="highlight-container" data-rel="C++"><figure class="iseeu highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;config.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> USE_MYMATH</span></span><br><span class="line">  <span class="meta">#<span class="keyword">include</span> <span class="string">&quot;math/MathFunctions.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">  <span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc &lt; <span class="number">3</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Usage: %s base exponent \n&quot;</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span> base = <span class="built_in">atof</span>(argv[<span class="number">1</span>]);</span><br><span class="line">    <span class="type">int</span> exponent = <span class="built_in">atoi</span>(argv[<span class="number">2</span>]);</span><br><span class="line">    </span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> USE_MYMATH</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Now we use our own Math library. \n&quot;</span>);</span><br><span class="line">    <span class="type">double</span> result = <span class="built_in">power</span>(base, exponent);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Now we use the standard library. \n&quot;</span>);</span><br><span class="line">    <span class="type">double</span> result = <span class="built_in">pow</span>(base, exponent);</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%g ^ %d is %g\n&quot;</span>, base, exponent, result);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>ç¼–å†™ <a class="link"   target="_blank" rel="noopener" href="http://config.h.in/" >config.h.in <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ–‡ä»¶</p>
</blockquote>
<p>ä¸Šé¢çš„ç¨‹åºå€¼å¾—æ³¨æ„çš„æ˜¯ç¬¬3è¡Œï¼Œè¿™é‡Œå¼•ç”¨äº†ä¸€ä¸ª config.h æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é¢„å®šä¹‰äº† <code>USE_MYMATH</code> çš„å€¼ã€‚ä½†æˆ‘ä»¬å¹¶ä¸ç›´æ¥ç¼–å†™è¿™ä¸ªæ–‡ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿ä» CMakeLists.txt ä¸­å¯¼å…¥é…ç½®ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ª <a class="link"   target="_blank" rel="noopener" href="http://config.h.in/" >config.h.in <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#cmakedefine USE_MYMATH</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ · CMake ä¼šè‡ªåŠ¨æ ¹æ® CMakeLists é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®è‡ªåŠ¨ç”Ÿæˆ config.h æ–‡ä»¶ã€‚</p>
<h6 id="ç¼–è¯‘é¡¹ç›®"><a href="#ç¼–è¯‘é¡¹ç›®" class="headerlink" title="ç¼–è¯‘é¡¹ç›®"></a>ç¼–è¯‘é¡¹ç›®</h6><p>ç°åœ¨ç¼–è¯‘ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œä¸ºäº†ä¾¿äºäº¤äº’å¼çš„é€‰æ‹©è¯¥å˜é‡çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>ccmake</code> å‘½ä»¤ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ <code>cmake -i</code> å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šæä¾›ä¸€ä¸ªä¼šè¯å¼çš„äº¤äº’å¼é…ç½®ç•Œé¢ï¼‰ï¼š</p>
<img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="/2023/06/27/CMake/image-20230518135248836.png"
                      class="" title="image-20230518135248836"
                >



<p>ä»ä¸­å¯ä»¥æ‰¾åˆ°åˆšåˆšå®šä¹‰çš„ <code>USE_MYMATH</code> é€‰é¡¹ï¼ŒæŒ‰é”®ç›˜çš„æ–¹å‘é”®å¯ä»¥åœ¨ä¸åŒçš„é€‰é¡¹çª—å£é—´è·³è½¬ï¼ŒæŒ‰ä¸‹ <code>enter</code> é”®å¯ä»¥ä¿®æ”¹è¯¥é€‰é¡¹ã€‚ä¿®æ”¹å®Œæˆåå¯ä»¥æŒ‰ä¸‹ <code>c</code> é€‰é¡¹å®Œæˆé…ç½®ï¼Œä¹‹åå†æŒ‰ <code>g</code> é”®ç¡®è®¤ç”Ÿæˆ Makefile ã€‚ccmake çš„å…¶ä»–æ“ä½œå¯ä»¥å‚è€ƒçª—å£ä¸‹æ–¹ç»™å‡ºçš„æŒ‡ä»¤æç¤ºã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¯•è¯•åˆ†åˆ«å°† <code>USE_MYMATH</code> è®¾ä¸º <code>ON</code> å’Œ <code>OFF</code> å¾—åˆ°çš„ç»“æœï¼š</p>
<blockquote>
<p>USE_MYMATH ä¸º ON</p>
</blockquote>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo4]$ ./Demo</span><br><span class="line">Now we use our own MathFunctions library. </span><br><span class="line"> 7 ^ 3 = 343.000000</span><br><span class="line"> 10 ^ 5 = 100000.000000</span><br><span class="line"> 2 ^ 10 = 1024.000000</span><br></pre></td></tr></table></figure></div>

<p>æ­¤æ—¶ config.h çš„å†…å®¹ä¸ºï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define USE_MYMATH</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>USE_MYMATH ä¸º OFF</p>
</blockquote>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo4]$ ./Demo</span><br><span class="line">Now we use the standard library. </span><br><span class="line"> 7 ^ 3 = 343.000000</span><br><span class="line"> 10 ^ 5 = 100000.000000</span><br><span class="line"> 2 ^ 10 = 1024.000000</span><br></pre></td></tr></table></figure></div>

<p>æ­¤æ—¶ config.h çš„å†…å®¹ä¸ºï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/* #undef USE_MYMATH */</span><br></pre></td></tr></table></figure></div>

<h6 id="å®‰è£…å’Œæµ‹è¯•"><a href="#å®‰è£…å’Œæµ‹è¯•" class="headerlink" title="å®‰è£…å’Œæµ‹è¯•"></a>å®‰è£…å’Œæµ‹è¯•</h6><p><strong>CMake ä¹Ÿå¯ä»¥æŒ‡å®šå®‰è£…è§„åˆ™ï¼Œä»¥åŠæ·»åŠ æµ‹è¯•</strong>ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½åˆ†åˆ«å¯ä»¥é€šè¿‡åœ¨äº§ç”Ÿ Makefile åä½¿ç”¨ <code>make install</code> å’Œ <code>make test</code> æ¥æ‰§è¡Œã€‚åœ¨ä»¥å‰çš„ GNU Makefile é‡Œï¼Œä½ å¯èƒ½éœ€è¦ä¸ºæ­¤ç¼–å†™ <code>install</code> å’Œ <code>test</code> ä¸¤ä¸ªä¼ªç›®æ ‡å’Œç›¸åº”çš„è§„åˆ™ï¼Œä½†åœ¨ CMake é‡Œï¼Œè¿™æ ·çš„å·¥ä½œåŒæ ·åªéœ€è¦ç®€å•çš„è°ƒç”¨å‡ æ¡å‘½ä»¤ã€‚</p>
<blockquote>
<p><strong>å®‰è£…è§„åˆ™å‘Šè¯‰CMakeåº”è¯¥å°†å“ªäº›æ–‡ä»¶å¤åˆ¶åˆ°å®‰è£…ç›®å½•ï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šæ–‡ä»¶çš„æƒé™ã€å®‰è£…è·¯å¾„å’Œå…¶ä»–å±æ€§ã€‚</strong></p>
<p>å®‰è£…è§„åˆ™é€šå¸¸ç”¨äºå°†ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€åº“æ–‡ä»¶ã€å¤´æ–‡ä»¶ã€é…ç½®æ–‡ä»¶å’Œå…¶ä»–å¿…è¦çš„èµ„æºå®‰è£…åˆ°ç³»ç»Ÿä¸­çš„é€‚å½“ä½ç½®ï¼Œä»¥ä¾›å…¶ä»–ç¨‹åºæˆ–ç”¨æˆ·ä½¿ç”¨ã€‚é€šè¿‡æŒ‡å®šå®‰è£…è§„åˆ™ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨æ„å»ºè¿‡ç¨‹ä¸­è‡ªå®šä¹‰å®‰è£…çš„æ–‡ä»¶å’Œç›®å½•ç»“æ„ï¼Œä»¥æ»¡è¶³ç‰¹å®šé¡¹ç›®æˆ–ç³»ç»Ÿçš„éœ€æ±‚ã€‚</p>
</blockquote>
<blockquote>
<p>å®šåˆ¶å®‰è£…è§„åˆ™</p>
</blockquote>
<p>é¦–å…ˆå…ˆåœ¨ math&#x2F;CMakeLists.txt æ–‡ä»¶é‡Œæ·»åŠ ä¸‹é¢ä¸¤è¡Œï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®š MathFunctions åº“çš„å®‰è£…è·¯å¾„</span></span><br><span class="line"><span class="keyword">install</span> (TARGETS MathFunctions DESTINATION bin)</span><br><span class="line"><span class="keyword">install</span> (FILES MathFunctions.h DESTINATION <span class="keyword">include</span>)</span><br></pre></td></tr></table></figure></div>

<p>æŒ‡æ˜ MathFunctions åº“çš„å®‰è£…è·¯å¾„ã€‚ä¹‹ååŒæ ·ä¿®æ”¹æ ¹ç›®å½•çš„ CMakeLists æ–‡ä»¶ï¼Œåœ¨æœ«å°¾æ·»åŠ ä¸‹é¢å‡ è¡Œï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®šå®‰è£…è·¯å¾„</span></span><br><span class="line"><span class="keyword">install</span> (TARGETS Demo DESTINATION bin)</span><br><span class="line"><span class="keyword">install</span> (FILES <span class="string">&quot;$&#123;PROJECT_BINARY_DIR&#125;/config.h&quot;</span></span><br><span class="line">         DESTINATION <span class="keyword">include</span>)</span><br></pre></td></tr></table></figure></div>

<p>é€šè¿‡ä¸Šé¢çš„å®šåˆ¶ï¼Œç”Ÿæˆçš„ Demo æ–‡ä»¶å’Œ MathFunctions å‡½æ•°åº“ libMathFunctions.o æ–‡ä»¶å°†ä¼šè¢«å¤åˆ¶åˆ° <code>/usr/local/bin</code> ä¸­ï¼Œè€Œ MathFunctions.h å’Œç”Ÿæˆçš„ config.h æ–‡ä»¶åˆ™ä¼šè¢«å¤åˆ¶åˆ° <code>/usr/local/include</code> ä¸­ã€‚æˆ‘ä»¬å¯ä»¥éªŒè¯ä¸€ä¸‹ï¼ˆé¡ºå¸¦ä¸€æçš„æ˜¯ï¼Œè¿™é‡Œçš„ <code>/usr/local/</code> æ˜¯é»˜è®¤å®‰è£…åˆ°çš„æ ¹ç›®å½•ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>CMAKE_INSTALL_PREFIX</code> å˜é‡çš„å€¼æ¥æŒ‡å®šè¿™äº›æ–‡ä»¶åº”è¯¥æ‹·è´åˆ°å“ªä¸ªæ ¹ç›®å½•ï¼‰ï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo5]$ sudo make install</span><br><span class="line">[ 50%] Built target MathFunctions</span><br><span class="line">[100%] Built target Demo</span><br><span class="line">Install the project...</span><br><span class="line">-- Install configuration: &quot;&quot;</span><br><span class="line">-- Installing: /usr/local/bin/Demo</span><br><span class="line">-- Installing: /usr/local/include/config.h</span><br><span class="line">-- Installing: /usr/local/bin/libMathFunctions.a</span><br><span class="line">-- Up-to-date: /usr/local/include/MathFunctions.h</span><br><span class="line">[ehome@xman Demo5]$ ls /usr/local/bin</span><br><span class="line">Demo  libMathFunctions.a</span><br><span class="line">[ehome@xman Demo5]$ ls /usr/local/include</span><br><span class="line">config.h  MathFunctions.h</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>åœ¨CMakeä¸­ï¼Œ<code>$&#123;PROJECT_BINARY_DIR&#125;</code>æ˜¯ä¸€ä¸ªå˜é‡ï¼Œç”¨äºè¡¨ç¤ºé¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶çš„è¾“å‡ºç›®å½•ï¼ˆå³æ„å»ºç›®å½•ï¼‰çš„è·¯å¾„ã€‚</p>
</blockquote>
<blockquote>
<p>ä¸ºå·¥ç¨‹æ·»åŠ æµ‹è¯•</p>
</blockquote>
<p>æ·»åŠ æµ‹è¯•åŒæ ·å¾ˆç®€å•ã€‚CMake æä¾›äº†ä¸€ä¸ªç§°ä¸º CTest çš„æµ‹è¯•å·¥å…·ã€‚æˆ‘ä»¬è¦åšçš„åªæ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ CMakeLists æ–‡ä»¶ä¸­è°ƒç”¨ä¸€ç³»åˆ—çš„ <code>add_test</code> å‘½ä»¤ã€‚</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯ç”¨æµ‹è¯•</span></span><br><span class="line"><span class="keyword">enable_testing</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•ç¨‹åºæ˜¯å¦æˆåŠŸè¿è¡Œ</span></span><br><span class="line"><span class="keyword">add_test</span> (test_run Demo <span class="number">5</span> <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•å¸®åŠ©ä¿¡æ¯æ˜¯å¦å¯ä»¥æ­£å¸¸æç¤º</span></span><br><span class="line"><span class="keyword">add_test</span> (test_usage Demo)</span><br><span class="line"><span class="keyword">set_tests_properties</span> (test_usage		<span class="comment">#ç”¨äºè®¾ç½®æµ‹è¯•ç”¨ä¾‹çš„å±æ€§ã€‚å®ƒå…è®¸æ‚¨ä¿®æ”¹ä¸æµ‹è¯•ç›¸å…³çš„å±æ€§ï¼Œä¾‹å¦‚æµ‹è¯•ç”¨ä¾‹çš„åç§°ã€è¶…æ—¶æ—¶é—´ã€å·¥ä½œç›®å½•ã€ä¾èµ–å…³ç³»ç­‰ã€‚</span></span><br><span class="line">  PROPERTIES PASS_REGULAR_EXPRESSION <span class="string">&quot;Usage: .* base exponent&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• 5 çš„å¹³æ–¹</span></span><br><span class="line"><span class="keyword">add_test</span> (test_5_2 Demo <span class="number">5</span> <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set_tests_properties</span> (test_5_2</span><br><span class="line"> PROPERTIES PASS_REGULAR_EXPRESSION <span class="string">&quot;is 25&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• 10 çš„ 5 æ¬¡æ–¹</span></span><br><span class="line"><span class="keyword">add_test</span> (test_10_5 Demo <span class="number">10</span> <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set_tests_properties</span> (test_10_5</span><br><span class="line"> PROPERTIES PASS_REGULAR_EXPRESSION <span class="string">&quot;is 100000&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• 2 çš„ 10 æ¬¡æ–¹</span></span><br><span class="line"><span class="keyword">add_test</span> (test_2_10 Demo <span class="number">2</span> <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set_tests_properties</span> (test_2_10</span><br><span class="line"> PROPERTIES PASS_REGULAR_EXPRESSION <span class="string">&quot;is 1024&quot;</span>)</span><br></pre></td></tr></table></figure></div>

<p>ä¸Šé¢çš„ä»£ç åŒ…å«äº†å››ä¸ªæµ‹è¯•ã€‚ç¬¬ä¸€ä¸ªæµ‹è¯• <code>test_run</code> ç”¨æ¥æµ‹è¯•ç¨‹åºæ˜¯å¦æˆåŠŸè¿è¡Œå¹¶è¿”å› 0 å€¼ã€‚å‰©ä¸‹çš„ä¸‰ä¸ªæµ‹è¯•åˆ†åˆ«ç”¨æ¥æµ‹è¯• 5 çš„ å¹³æ–¹ã€10 çš„ 5 æ¬¡æ–¹ã€2 çš„ 10 æ¬¡æ–¹æ˜¯å¦éƒ½èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚<strong>å…¶ä¸­ <code>PASS_REGULAR_EXPRESSION</code> ç”¨æ¥æµ‹è¯•è¾“å‡ºæ˜¯å¦åŒ…å«åé¢è·Ÿç€çš„å­—ç¬¦ä¸²ã€‚</strong></p>
<blockquote>
<p>è®¾ç½®äº†åä¸º<code>test_usage</code>çš„æµ‹è¯•ç”¨ä¾‹çš„å±æ€§ã€‚å±æ€§<code>PASS_REGULAR_EXPRESSION</code>æŒ‡å®šäº†ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºåŒ¹é…æµ‹è¯•çš„è¾“å‡ºç»“æœã€‚è¿™é‡Œï¼Œå®ƒç”¨äºæ£€æŸ¥æµ‹è¯•æ˜¯å¦æŒ‰é¢„æœŸæ˜¾ç¤ºäº†å¸®åŠ©ä¿¡æ¯çš„æç¤ºã€‚</p>
<p>åŒæ ·åœ°ï¼Œå…¶ä»–æµ‹è¯•ç”¨ä¾‹ä¹Ÿä½¿ç”¨<code>set_tests_properties</code>æ¥è®¾ç½®æœŸæœ›çš„è¾“å‡ºç»“æœï¼Œä»¥ç¡®ä¿æµ‹è¯•çš„æ­£ç¡®æ€§ã€‚è¿™æ ·ï¼Œåœ¨æ‰§è¡Œ<code>ctest</code>å‘½ä»¤è¿è¡Œæµ‹è¯•æ—¶ï¼ŒCTestå°†æ ¹æ®è®¾ç½®çš„å±æ€§æ¥åˆ¤æ–­æµ‹è¯•æ˜¯å¦é€šè¿‡ã€‚</p>
</blockquote>
<p>è®©æˆ‘ä»¬çœ‹çœ‹æµ‹è¯•çš„ç»“æœï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo5]$ make test</span><br><span class="line">Running tests...</span><br><span class="line">Test project /home/ehome/Documents/programming/C/power/Demo5</span><br><span class="line">    Start 1: test_run</span><br><span class="line">1/4 Test #1: test_run .........................   Passed    0.00 sec</span><br><span class="line">    Start 2: test_5_2</span><br><span class="line">2/4 Test #2: test_5_2 .........................   Passed    0.00 sec</span><br><span class="line">    Start 3: test_10_5</span><br><span class="line">3/4 Test #3: test_10_5 ........................   Passed    0.00 sec</span><br><span class="line">    Start 4: test_2_10</span><br><span class="line">4/4 Test #4: test_2_10 ........................   Passed    0.00 sec</span><br><span class="line"></span><br><span class="line">100% tests passed, 0 tests failed out of 4</span><br><span class="line"></span><br><span class="line">Total Test time (real) =   0.01 sec</span><br></pre></td></tr></table></figure></div>

<p>å¦‚æœè¦æµ‹è¯•æ›´å¤šçš„è¾“å…¥æ•°æ®ï¼Œåƒä¸Šé¢é‚£æ ·ä¸€ä¸ªä¸ªå†™æµ‹è¯•ç”¨ä¾‹æœªå…å¤ªç¹çã€‚è¿™æ—¶å¯ä»¥é€šè¿‡ç¼–å†™å®æ¥å®ç°ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸€ä¸ªå®ï¼Œç”¨æ¥ç®€åŒ–æµ‹è¯•å·¥ä½œ</span></span><br><span class="line"><span class="keyword">macro</span> (do_test arg1 arg2 result)	<span class="comment">#åˆ›å»ºä¸€ä¸ªdo_testçš„å®</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">add_test</span> (test_<span class="variable">$&#123;arg1&#125;</span>_<span class="variable">$&#123;arg2&#125;</span> Demo <span class="variable">$&#123;arg1&#125;</span> <span class="variable">$&#123;arg2&#125;</span>)	<span class="comment">#add_teståˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œtest_$&#123;arg1&#125;_$&#123;arg2&#125;æ˜¯åç§°ï¼ŒDemo $&#123;arg1&#125; $&#123;arg2&#125;æ˜¯å¯æ‰§è¡Œæ–‡ä»¶åŠå‚æ•°</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">set_tests_properties</span> (test_<span class="variable">$&#123;arg1&#125;</span>_<span class="variable">$&#123;arg2&#125;</span></span><br><span class="line">    PROPERTIES PASS_REGULAR_EXPRESSION <span class="variable">$&#123;result&#125;</span>)	<span class="comment">#è®¾ç½®æµ‹è¯•ç”¨ä¾‹çš„å±æ€§ï¼ŒæŒ‡æ˜é¢„æœŸè¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="keyword">endmacro</span> (do_test)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ä½¿ç”¨è¯¥å®è¿›è¡Œä¸€ç³»åˆ—çš„æ•°æ®æµ‹è¯•</span></span><br><span class="line">do_test (<span class="number">5</span> <span class="number">2</span> <span class="string">&quot;is 25&quot;</span>)</span><br><span class="line">do_test (<span class="number">10</span> <span class="number">5</span> <span class="string">&quot;is 100000&quot;</span>)</span><br><span class="line">do_test (<span class="number">2</span> <span class="number">10</span> <span class="string">&quot;is 1024&quot;</span>)</span><br></pre></td></tr></table></figure></div>

<p>å…³äº CTest çš„æ›´è¯¦ç»†çš„ç”¨æ³•å¯ä»¥é€šè¿‡ <code>man 1 ctest</code> å‚è€ƒ CTest çš„æ–‡æ¡£ã€‚</p>
<blockquote>
<p>æ”¯æŒgdb</p>
</blockquote>
<p>è®© CMake æ”¯æŒ gdb çš„è®¾ç½®ä¹Ÿå¾ˆå®¹æ˜“ï¼Œåœ¨<code>CMakeLists.txt</code>æ–‡ä»¶åªéœ€è¦æŒ‡å®š <code>Debug</code> æ¨¡å¼ä¸‹å¼€å¯ <code>-g</code> é€‰é¡¹ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(CMAKE_BUILD_TYPE <span class="string">&quot;Debug&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS_DEBUG <span class="string">&quot;$ENV&#123;CXXFLAGS&#125; -O0 -Wall -g -ggdb&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS_RELEASE <span class="string">&quot;$ENV&#123;CXXFLAGS&#125; -O3 -Wall&quot;</span>)</span><br></pre></td></tr></table></figure></div>

<p>ä¹‹åå¯ä»¥ç›´æ¥å¯¹ç”Ÿæˆçš„ç¨‹åºä½¿ç”¨ gdb æ¥è°ƒè¯•ã€‚<code>gdb Demo</code></p>
<h6 id="æ·»åŠ ç¯å¢ƒæ£€æŸ¥"><a href="#æ·»åŠ ç¯å¢ƒæ£€æŸ¥" class="headerlink" title="æ·»åŠ ç¯å¢ƒæ£€æŸ¥"></a>æ·»åŠ ç¯å¢ƒæ£€æŸ¥</h6><p>æœ‰æ—¶å€™å¯èƒ½è¦å¯¹ç³»ç»Ÿç¯å¢ƒåšç‚¹æ£€æŸ¥ï¼Œä¾‹å¦‚è¦ä½¿ç”¨ä¸€ä¸ªå¹³å°ç›¸å…³çš„ç‰¹æ€§çš„æ—¶å€™ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦è‡ªå¸¦ pow å‡½æ•°ã€‚å¦‚æœå¸¦æœ‰ pow å‡½æ•°ï¼Œå°±ä½¿ç”¨å®ƒï¼›å¦åˆ™ä½¿ç”¨æˆ‘ä»¬å®šä¹‰çš„ power å‡½æ•°ã€‚</p>
<blockquote>
<p>æ·»åŠ  CheckFunctionExists å®</p>
</blockquote>
<p>é¦–å…ˆåœ¨é¡¶å±‚ CMakeLists æ–‡ä»¶ä¸­æ·»åŠ  CheckFunctionExists.cmake å®ï¼Œå¹¶è°ƒç”¨ <code>check_function_exists</code> å‘½ä»¤æµ‹è¯•é“¾æ¥å™¨æ˜¯å¦èƒ½å¤Ÿåœ¨é“¾æ¥é˜¶æ®µæ‰¾åˆ° <code>pow</code> å‡½æ•°ã€‚</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ”¯æŒ pow å‡½æ•°</span></span><br><span class="line"><span class="keyword">include</span> (<span class="variable">$&#123;CMAKE_ROOT&#125;</span>/Modules/CheckFunctionExists.cmake)		<span class="comment">#å°†CheckFunctionExists.cmakeåŒ…å«æ£€æŸ¥æŒ‡å®šçš„å‡½æ•°æ˜¯å¦å­˜åœ¨ã€‚</span></span><br><span class="line">check_function_exists (pow HAVE_POW)	<span class="comment">#ç”¨äºæ£€æŸ¥å‡½æ•°powæ˜¯å¦å­˜åœ¨ã€‚è¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ£€æŸ¥çš„å‡½æ•°åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå˜é‡åï¼Œç”¨äºå­˜å‚¨æ£€æŸ¥ç»“æœã€‚</span></span><br></pre></td></tr></table></figure></div>

<p><strong>å°†ä¸Šé¢è¿™æ®µä»£ç æ”¾åœ¨ <code>configure_file</code> å‘½ä»¤å‰ã€‚</strong></p>
<blockquote>
<p>é¢„å®šä¹‰ç›¸å…³å®å˜é‡</p>
</blockquote>
<p>æ¥ä¸‹æ¥ä¿®æ”¹ <a class="link"   target="_blank" rel="noopener" href="http://config.h.in/" >config.h.in <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ–‡ä»¶ï¼Œé¢„å®šä¹‰ç›¸å…³çš„å®å˜é‡ã€‚</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// does the platform provide pow <span class="keyword">function</span>?</span><br><span class="line"><span class="comment">#cmakedefine HAVE_POW</span></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>åœ¨ä»£ç ä¸­ä½¿ç”¨å®å’Œå‡½æ•°</p>
</blockquote>
<p>æœ€åä¸€æ­¥æ˜¯ä¿®æ”¹ <a class="link"   target="_blank" rel="noopener" href="http://main.cc/" >main.cc <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> ï¼Œåœ¨ä»£ç ä¸­ä½¿ç”¨å®å’Œå‡½æ•°ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ifdef HAVE_POW</span></span><br><span class="line">    printf(<span class="string">&quot;Now we use the standard library. \n&quot;</span>);</span><br><span class="line">    double result = pow(base, exponent);</span><br><span class="line"><span class="comment">#else</span></span><br><span class="line">    printf(<span class="string">&quot;Now we use our own Math library. \n&quot;</span>);</span><br><span class="line">    double result = power(base, exponent);</span><br><span class="line"><span class="comment">#endif</span></span><br></pre></td></tr></table></figure></div>

<h6 id="æ·»åŠ ç‰ˆæœ¬å·"><a href="#æ·»åŠ ç‰ˆæœ¬å·" class="headerlink" title="æ·»åŠ ç‰ˆæœ¬å·"></a>æ·»åŠ ç‰ˆæœ¬å·</h6><p>ç»™é¡¹ç›®æ·»åŠ å’Œç»´æŠ¤ç‰ˆæœ¬å·æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œè¿™æ ·æœ‰åˆ©äºç”¨æˆ·äº†è§£æ¯ä¸ªç‰ˆæœ¬çš„ç»´æŠ¤æƒ…å†µï¼Œå¹¶åŠæ—¶äº†è§£å½“å‰æ‰€ç”¨çš„ç‰ˆæœ¬æ˜¯å¦è¿‡æ—¶ï¼Œæˆ–æ˜¯å¦å¯èƒ½å‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚</p>
<p><strong>é¦–å…ˆä¿®æ”¹é¡¶å±‚ CMakeLists æ–‡ä»¶ï¼Œåœ¨ <code>project</code> å‘½ä»¤ä¹‹ååŠ å…¥å¦‚ä¸‹ä¸¤è¡Œï¼š</strong></p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> (Demo_VERSION_MAJOR <span class="number">1</span>)</span><br><span class="line"><span class="keyword">set</span> (Demo_VERSION_MINOR <span class="number">0</span>)</span><br></pre></td></tr></table></figure></div>

<p>åˆ†åˆ«æŒ‡å®šå½“å‰çš„é¡¹ç›®çš„ä¸»ç‰ˆæœ¬å·å’Œå‰¯ç‰ˆæœ¬å·ã€‚</p>
<p>ä¹‹åï¼Œä¸ºäº†åœ¨ä»£ç ä¸­è·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ <a class="link"   target="_blank" rel="noopener" href="http://config.h.in/" >config.h.in <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ–‡ä»¶ï¼Œæ·»åŠ ä¸¤ä¸ªé¢„å®šä¹‰å˜é‡ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// the configured options <span class="keyword">and</span> settings for Tutorial</span><br><span class="line"><span class="comment">#define Demo_VERSION_MAJOR @Demo_VERSION_MAJOR@</span></span><br><span class="line"><span class="comment">#define Demo_VERSION_MINOR @Demo_VERSION_MINOR@</span></span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·å°±å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­æ‰“å°ç‰ˆæœ¬ä¿¡æ¯äº†ï¼š</p>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;stdlib.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;math.h&gt;</span></span><br><span class="line"><span class="comment">#include &quot;config.h&quot;</span></span><br><span class="line"><span class="comment">#include &quot;math/MathFunctions.h&quot;</span></span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (argc &lt; <span class="number">3</span>)&#123;</span><br><span class="line">        // print version info</span><br><span class="line">        printf(<span class="string">&quot;%s Version %d.%d\n&quot;</span>,</span><br><span class="line">            argv[<span class="number">0</span>],</span><br><span class="line">            Demo_VERSION_MAJOR,</span><br><span class="line">            Demo_VERSION_MINOR);</span><br><span class="line">        printf(<span class="string">&quot;Usage: %s base exponent \n&quot;</span>, argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    double base = atof(argv[<span class="number">1</span>]);</span><br><span class="line">    int exponent = atoi(argv[<span class="number">2</span>]);</span><br><span class="line">    </span><br><span class="line"><span class="comment">#if defined (HAVE_POW)</span></span><br><span class="line">    printf(<span class="string">&quot;Now we use the standard library. \n&quot;</span>);</span><br><span class="line">    double result = pow(base, exponent);</span><br><span class="line"><span class="comment">#else</span></span><br><span class="line">    printf(<span class="string">&quot;Now we use our own Math library. \n&quot;</span>);</span><br><span class="line">    double result = power(base, exponent);</span><br><span class="line"><span class="comment">#endif</span></span><br><span class="line">    </span><br><span class="line">    printf(<span class="string">&quot;%g ^ %d is %g\n&quot;</span>, base, exponent, result);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h6 id="ç”Ÿæˆå®‰è£…åŒ…"><a href="#ç”Ÿæˆå®‰è£…åŒ…" class="headerlink" title="ç”Ÿæˆå®‰è£…åŒ…"></a>ç”Ÿæˆå®‰è£…åŒ…</h6><p>æœ¬èŠ‚å°†å­¦ä¹ å¦‚ä½•é…ç½®ç”Ÿæˆå„ç§å¹³å°ä¸Šçš„å®‰è£…åŒ…ï¼ŒåŒ…æ‹¬äºŒè¿›åˆ¶å®‰è£…åŒ…å’Œæºç å®‰è£…åŒ…ã€‚ä¸ºäº†å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° CPack ï¼Œå®ƒåŒæ ·ä¹Ÿæ˜¯ç”± CMake æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œä¸“é—¨ç”¨äºæ‰“åŒ…ã€‚</p>
<p>é¦–å…ˆåœ¨é¡¶å±‚çš„ CMakeLists.txt æ–‡ä»¶å°¾éƒ¨æ·»åŠ ä¸‹é¢å‡ è¡Œï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># æ„å»ºä¸€ä¸ª CPack å®‰è£…åŒ…</span><br><span class="line">include (InstallRequiredSystemLibraries)</span><br><span class="line">set (CPACK_RESOURCE_FILE_LICENSE</span><br><span class="line">  &quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;/License.txt&quot;)</span><br><span class="line">set (CPACK_PACKAGE_VERSION_MAJOR &quot;$&#123;Demo_VERSION_MAJOR&#125;&quot;)</span><br><span class="line">set (CPACK_PACKAGE_VERSION_MINOR &quot;$&#123;Demo_VERSION_MINOR&#125;&quot;)</span><br><span class="line">include (CPack)</span><br></pre></td></tr></table></figure></div>

<p>ä¸Šé¢çš„ä»£ç åšäº†ä»¥ä¸‹å‡ ä¸ªå·¥ä½œï¼š</p>
<ol>
<li>å¯¼å…¥ InstallRequiredSystemLibraries æ¨¡å—ï¼Œä»¥ä¾¿ä¹‹åå¯¼å…¥ CPack æ¨¡å—ï¼›</li>
<li>è®¾ç½®ä¸€äº› CPack ç›¸å…³å˜é‡ï¼ŒåŒ…æ‹¬ç‰ˆæƒä¿¡æ¯å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œå…¶ä¸­ç‰ˆæœ¬ä¿¡æ¯ç”¨äº†ä¸Šä¸€èŠ‚å®šä¹‰çš„ç‰ˆæœ¬å·ï¼›</li>
<li>å¯¼å…¥ CPack æ¨¡å—ã€‚</li>
</ol>
<p><strong>æ¥ä¸‹æ¥çš„å·¥ä½œæ˜¯åƒå¾€å¸¸ä¸€æ ·æ„å»ºå·¥ç¨‹ï¼Œå¹¶æ‰§è¡Œ <code>cpack</code> å‘½ä»¤ã€‚ï¼ˆæ³¨æ„ç¼–è¯‘å‰éœ€è¦å¯¼å…¥License.txtæ–‡ä»¶ï¼‰</strong></p>
<ul>
<li>ç”ŸæˆäºŒè¿›åˆ¶å®‰è£…åŒ…ï¼š</li>
</ul>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cpack -C CPackConfig.cmake</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p><code>cpack</code> æ˜¯ CMake ä¸­çš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç”Ÿæˆè½¯ä»¶åŒ…ï¼ˆpackageï¼‰æ–‡ä»¶ï¼Œå¦‚å®‰è£…ç¨‹åºã€å‹ç¼©æ–‡ä»¶ç­‰ï¼Œä»¥ä¾¿è¿›è¡Œè½¯ä»¶çš„åˆ†å‘å’Œå®‰è£…ã€‚<code>-C</code> é€‰é¡¹ç”¨äºæŒ‡å®š CPack çš„é…ç½®æ–‡ä»¶ï¼Œ<strong>å…¶ä¸­ <code>CPackConfig.cmake</code> æ˜¯ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„ CPack é…ç½®æ–‡ä»¶çš„åç§°</strong></p>
</blockquote>
<ul>
<li>ç”Ÿæˆæºç å®‰è£…åŒ…</li>
</ul>
<div class="highlight-container" data-rel="Cmake"><figure class="iseeu highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cpack -C CPackSourceConfig.cmake</span><br></pre></td></tr></table></figure></div>

<p>æˆ‘ä»¬å¯ä»¥è¯•ä¸€ä¸‹ã€‚åœ¨ç”Ÿæˆé¡¹ç›®åï¼Œæ‰§è¡Œ <code>cpack -C CPackConfig.cmake</code> å‘½ä»¤ï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo8]$ cpack -C CPackSourceConfig.cmake</span><br><span class="line">CPack: Create package using STGZ</span><br><span class="line">CPack: Install projects</span><br><span class="line">CPack: - Run preinstall target for: Demo8</span><br><span class="line">CPack: - Install project: Demo8</span><br><span class="line">CPack: Create package</span><br><span class="line">CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.sh generated.</span><br><span class="line">CPack: Create package using TGZ</span><br><span class="line">CPack: Install projects</span><br><span class="line">CPack: - Run preinstall target for: Demo8</span><br><span class="line">CPack: - Install project: Demo8</span><br><span class="line">CPack: Create package</span><br><span class="line">CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.tar.gz generated.</span><br><span class="line">CPack: Create package using TZ</span><br><span class="line">CPack: Install projects</span><br><span class="line">CPack: - Run preinstall target for: Demo8</span><br><span class="line">CPack: - Install project: Demo8</span><br><span class="line">CPack: Create package</span><br><span class="line">CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.tar.Z generated.</span><br></pre></td></tr></table></figure></div>

<p>æ­¤æ—¶ä¼šåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»º 3 ä¸ªä¸åŒæ ¼å¼çš„äºŒè¿›åˆ¶åŒ…æ–‡ä»¶ï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo8]$ ls Demo8-*</span><br><span class="line">Demo8-1.0.1-Linux.sh  Demo8-1.0.1-Linux.tar.gz  Demo8-1.0.1-Linux.tar.Z</span><br></pre></td></tr></table></figure></div>

<p>è¿™ 3 ä¸ªäºŒè¿›åˆ¶åŒ…æ–‡ä»¶æ‰€åŒ…å«çš„å†…å®¹æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå…¶ä¸­ä¸€ä¸ªã€‚æ­¤æ—¶ä¼šå‡ºç°ä¸€ä¸ªç”± CPack è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼å®‰è£…ç•Œé¢ï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo8]$ sh Demo8-1.0.1-Linux.sh </span><br><span class="line">Demo8 Installer Version: 1.0.1, Copyright (c) Humanity</span><br><span class="line">This is a self-extracting archive.</span><br><span class="line">The archive will be extracted to: /home/ehome/Documents/programming/C/power/Demo8</span><br><span class="line"></span><br><span class="line">If you want to stop extracting, please press &lt;ctrl-C&gt;.</span><br><span class="line">The MIT License (MIT)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2013 Joseph Pan(http://hahack.com)</span><br><span class="line"></span><br><span class="line">Permission is hereby granted, free of charge, to any person obtaining a copy of</span><br><span class="line">this software and associated documentation files (the &quot;Software&quot;), to deal in</span><br><span class="line">the Software without restriction, including without limitation the rights to</span><br><span class="line">use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of</span><br><span class="line">the Software, and to permit persons to whom the Software is furnished to do so,</span><br><span class="line">subject to the following conditions:</span><br><span class="line"></span><br><span class="line">The above copyright notice and this permission notice shall be included in all</span><br><span class="line">copies or substantial portions of the Software.</span><br><span class="line"></span><br><span class="line">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><br><span class="line">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS</span><br><span class="line">FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR</span><br><span class="line">COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER</span><br><span class="line">IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</span><br><span class="line">CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Do you accept the license? [yN]: </span><br><span class="line">y</span><br><span class="line">By default the Demo8 will be installed in:</span><br><span class="line">  &quot;/home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux&quot;</span><br><span class="line">Do you want to include the subdirectory Demo8-1.0.1-Linux?</span><br><span class="line">Saying no will install in: &quot;/home/ehome/Documents/programming/C/power/Demo8&quot; [Yn]: </span><br><span class="line">y</span><br><span class="line"></span><br><span class="line">Using target directory: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux</span><br><span class="line">Extracting, please wait...</span><br><span class="line"></span><br><span class="line">Unpacking finished successfully</span><br></pre></td></tr></table></figure></div>

<p>å®Œæˆåæç¤ºå®‰è£…åˆ°äº† Demo8-1.0.1-Linux å­ç›®å½•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å»æ‰§è¡Œè¯¥ç¨‹åºï¼š</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo8]$ ./Demo8-1.0.1-Linux/bin/Demo 5 2</span><br><span class="line">Now we use our own Math library. </span><br><span class="line">5 ^ 2 is 25</span><br></pre></td></tr></table></figure></div>

<p>å…³äº CPack çš„æ›´è¯¦ç»†çš„ç”¨æ³•å¯ä»¥é€šè¿‡ <code>man 1 cpack</code> å‚è€ƒ CPack çš„æ–‡æ¡£ã€‚</p>
<h6 id="å°†å…¶ä»–å¹³å°çš„é¡¹ç›®è¿ç§»åˆ°CMake"><a href="#å°†å…¶ä»–å¹³å°çš„é¡¹ç›®è¿ç§»åˆ°CMake" class="headerlink" title="å°†å…¶ä»–å¹³å°çš„é¡¹ç›®è¿ç§»åˆ°CMake"></a>å°†å…¶ä»–å¹³å°çš„é¡¹ç›®è¿ç§»åˆ°CMake</h6><blockquote>
<p>é€šè¿‡CMakeå¯ä»¥ç¼–å†™ä¸€ä¸ªé€šç”¨çš„CMakeLists.txtæ–‡ä»¶ï¼Œç„¶ååœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šç”Ÿæˆç›¸åº”çš„æ„å»ºæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œåœ¨Windowsä¸Šå¯ä»¥ç”ŸæˆVisual Studioè§£å†³æ–¹æ¡ˆæˆ–ä½¿ç”¨MinGWç”ŸæˆMakefileï¼Œåœ¨Linuxä¸Šå¯ä»¥ç”ŸæˆMakefileï¼Œåœ¨macOSä¸Šå¯ä»¥ç”ŸæˆXcodeé¡¹ç›®ç­‰ã€‚è¿™æ ·å¼€å‘è€…å¯ä»¥ä½¿ç”¨ç›¸åŒçš„CMakeé…ç½®æ–‡ä»¶åœ¨ä¸åŒçš„å¹³å°ä¸Šæ„å»ºé¡¹ç›®ã€‚</p>
</blockquote>
<p>CMake å¯ä»¥å¾ˆè½»æ¾åœ°æ„å»ºå‡ºåœ¨é€‚åˆå„ä¸ªå¹³å°æ‰§è¡Œçš„å·¥ç¨‹ç¯å¢ƒã€‚è€Œå¦‚æœå½“å‰çš„å·¥ç¨‹ç¯å¢ƒä¸æ˜¯ CMake ï¼Œè€Œæ˜¯åŸºäºæŸä¸ªç‰¹å®šçš„å¹³å°ï¼Œæ˜¯å¦å¯ä»¥è¿ç§»åˆ° CMake å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯èƒ½çš„ã€‚ä¸‹é¢é’ˆå¯¹å‡ ä¸ªå¸¸ç”¨çš„å¹³å°ï¼Œåˆ—å‡ºäº†å®ƒä»¬å¯¹åº”çš„è¿ç§»æ–¹æ¡ˆã€‚</p>
<blockquote>
<p>autotools</p>
</blockquote>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="https://projects.kde.org/projects/kde/kdesdk/kde-dev-scripts/repository/revisions/master/changes/cmake-utils/scripts/am2cmake" >am2cmake <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> å¯ä»¥å°† autotools ç³»çš„é¡¹ç›®è½¬æ¢åˆ° CMakeï¼Œè¿™ä¸ªå·¥å…·çš„ä¸€ä¸ªæˆåŠŸæ¡ˆä¾‹æ˜¯ KDE ã€‚</li>
<li><a class="link"   target="_blank" rel="noopener" href="http://emanuelgreisen.dk/stuff/kdevelop_am2cmake.php.tgz" >Alternative Automake2CMake <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> å¯ä»¥è½¬æ¢ä½¿ç”¨ automake çš„ KDevelop å·¥ç¨‹é¡¹ç›®ã€‚</li>
<li><a class="link"   target="_blank" rel="noopener" href="http://www.cmake.org/Wiki/GccXmlAutoConfHints" >Converting autoconf tests <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
</ul>
<blockquote>
<p>qmake</p>
</blockquote>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="http://www.cmake.org/Wiki/CMake:ConvertFromQmake" >qmake converter <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> å¯ä»¥è½¬æ¢ä½¿ç”¨ QT çš„ qmake çš„å·¥ç¨‹ã€‚</li>
</ul>
<blockquote>
<p>Visual Studio</p>
</blockquote>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="http://vcproj2cmake.sf.net/" >vcproj2cmake.rb <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> å¯ä»¥æ ¹æ® Visual Studio çš„å·¥ç¨‹æ–‡ä»¶ï¼ˆåç¼€åæ˜¯ <code>.vcproj</code> æˆ– <code>.vcxproj</code>ï¼‰ç”Ÿæˆ CMakeLists.txt æ–‡ä»¶ã€‚</li>
<li><a class="link"   target="_blank" rel="noopener" href="http://nberserk.blogspot.com/2010/11/converting-vc-projectsvcproj-to.html" >vcproj2cmake.ps1 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> vcproj2cmake çš„ PowerShell ç‰ˆæœ¬ã€‚</li>
<li><a class="link"   target="_blank" rel="noopener" href="http://sourceforge.net/projects/folders4cmake/" >folders4cmake <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ ¹æ® Visual Studio é¡¹ç›®æ–‡ä»¶ç”Ÿæˆç›¸åº”çš„ â€œsource_groupâ€ ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨ CMake è„šæœ¬ä¸­ä½¿ç”¨ã€‚æ”¯æŒ Visual Studio 9&#x2F;10 å·¥ç¨‹æ–‡ä»¶ã€‚</li>
</ul>
<blockquote>
<p>CMakeLists.txt è‡ªåŠ¨æ¨å¯¼</p>
</blockquote>
<ul>
<li><a class="link"   target="_blank" rel="noopener" href="http://websvn.kde.org/trunk/KDE/kdesdk/cmake/scripts/" >gencmake <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> æ ¹æ®ç°æœ‰æ–‡ä»¶æ¨å¯¼ CMakeLists.txt æ–‡ä»¶ã€‚</li>
<li><a class="link"   target="_blank" rel="noopener" href="http://www.vanvelzensoftware.com/postnuke/index.php?name=Downloads&req=viewdownload&cid=7" >CMakeListGenerator <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> åº”ç”¨ä¸€å¥—æ–‡ä»¶å’Œç›®å½•åˆ†æåˆ›å»ºå‡ºå®Œæ•´çš„ CMakeLists.txt æ–‡ä»¶ã€‚ä»…æ”¯æŒ Win32 å¹³å°ã€‚</li>
</ul>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>æ ‡é¢˜:</strong> CMake</li>
        <li><strong>ä½œè€…:</strong> Airex Yu</li>
        <li><strong>åˆ›å»ºäº:</strong> 2023-06-27 20:58:49</li>
        
            <li>
                <strong>æ›´æ–°äº:</strong> 2023-06-27 20:59:16
            </li>
        
        <li>
            <strong>é“¾æ¥:</strong> http://example.com/2023/06/27/CMake/
        </li>
        <li>
            <strong>ç‰ˆæƒå£°æ˜:</strong> æœ¬æ–‡ç« é‡‡ç”¨ <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> è¿›è¡Œè®¸å¯ã€‚
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/Cmake/">#Cmake</a>&nbsp;
                        </li>
                    
                </ul>
            

            

            
                <div class="article-nav">
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/06/17/VsCode%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">VsCodeè¿œç¨‹è¿æ¥</span>
                                    <span class="post-nav-item">ä¸‹ä¸€ç¯‡</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;è¯„è®º
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-pjax>
        import { init } from 'https://evan.beee.top/js/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://example.example.com',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">æ­¤é¡µç›®å½•</div>
        <div class="page-title">CMake</div>
        

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2023</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">Airex Yu</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        è®¿é—®äººæ•°&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        æ€»è®¿é—®é‡&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">ç”± <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="åœ–å±¤_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> é©±åŠ¨</span>
                <br>
            <span class="theme-version-container">ä¸»é¢˜&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.5</a>
        </div>
        
        
        
            <div id="start_div" style="display:none">
                2023/01/05 11:45:14
            </div>
            <div>
                åšå®¢å·²è¿è¡Œ <span class="odometer" id="runtime_days" ></span> å¤© <span class="odometer" id="runtime_hours"></span> å°æ—¶ <span class="odometer" id="runtime_minutes"></span> åˆ†é’Ÿ <span class="odometer" id="runtime_seconds"></span> ç§’
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="æœç´¢..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/navbarShrink.js"></script>

<script src="/js/tools/scrollTopBottom.js"></script>

<script src="/js/tools/lightDarkSwitch.js"></script>



    
<script src="/js/tools/localSearch.js"></script>




    
<script src="/js/tools/codeBlock.js"></script>




    
<script src="/js/layouts/lazyload.js"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js"></script>




    
<script src="/js/libs/mermaid.min.js"></script>

    
<script src="/js/plugins/mermaid.js"></script>





<div class="post-scripts pjax">
    
        
<script src="/js/tools/tocToggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>
